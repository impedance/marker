# Правила форматирования для конвертации DOCX в Markdown

Правила форматирования для конвертации DOCX в Markdown:

## 1. Структура файлов

### Именование

Все файлы должны находиться в папке `content` и могут иметь неограниченную вложенность.  
Однако для большего удобства рекомендуется делать не более 2х уровней вложенности.  

Например:

```conf
content: # Корневая папка
  - 1.portal: # Папка с разделами проекта "Портал разработчика"
    - 1.administrator: # Руководство Администратора "Портала разработчика"
      - 0.index.md # Главная страница (URL будет совпадать с именем папки)
      - 1.users.md # Страница "Пользователи" (/portal/administrator/users)
      - 2.roles.md # Страница "Роли" (/portal/administrator/roles)
    - 2.user: # Руководство Пользователя "Портала разработчика" (/portal/users)
      - 0.index.md # Главная страница (URL будет совпадать с именем папки) (/portal/users)
      - 1.profile.md # Страница "Профиль" (/portal/users/profile)
  - dynamic directory:
    - index.md
    - about.md  
```

В именовании папки и файлов присутствует начальная цифра. Пример: `1.portal` и `1.users.md`.  
Цифра указывает порядок сортировки файлов/папок, который далее влияет на отображение меню.  
Цифра **обязательно** должна заканчиваться **точкой**. Вложенность цифр - не ограничена. Пример: `010200.portal`.

Имена папок __желательно__ называть латинскими буквами, однако это можно пропустить и называть кирилицей, 
[Nuxt Content](https://content.nuxt.com) автоматически их транслитирирует в латиницу. 
Однако если автоматический перевод не устроит - всегда можно переименовать файл/папку.

Файл `0.index.md` следует создавать в том случае, если необходим блок "Аннотация" без привязки к определенной странице.  
Например `/developer/administrator` выведет файл `content/2.developer/1.administrator/0.index.md`

#### .navigation.yml

Данный файл следует создавать в папках для описания метадаты папки (т.е. то, как имя этой папки должно выглядеть в меню)

Подробнее можно почитать [здесь](https://content.nuxt.com/docs/utils/query-collection-navigation#navigation-metadata-with-navigationyml)

Пример:

```yaml content/2.developer/1.administrator/.navigation.yml
title: Руководство пользователя
```

### Frontmatter

Так же стоит почитать гайд от разработчиков плагина [Nuxt Content](https://content.nuxt.com/docs/files/markdown#frontmatter)

Каждый файл должен начинаться с YAML frontmatter:

```yaml
---
title: Название главы/раздела
description: Некоторое описание страницы # опционально <meta name="description" content="...">

nextRead: # (опционально)
  to: /путь/к/следующей/странице
  label: Название следующей страницы
---
```

### Навигация

Для навигации можно использовать два формата:

**Двунаправленная навигация:**

```yaml
---
title: Название главы

readPrev:
  to: /path/to/previous
  label: Предыдущий раздел

readNext:
  to: /path/to/next
  label: Следующий раздел
---
```

**Простая навигация вперед:**

```yaml
---
title: Название главы

nextRead:
  to: /path/to/next
  label: Следующий раздел
---
```

### Основной заголовок

После frontmatter идет заголовок первого уровня, совпадающий с title:

```markdown
# Название главы
```

> TIP: если не указан `title` в блоке `frontmatter`, то в `title` будет автоматически подставлен заголовок первого уровня

## 2. Заголовки и нумерация

### Иерархия заголовков

- H1 (`#`) - основной заголовок главы без номера
- H2 (`##`) - разделы с нумерацией типа "1.1", "2.1", "3.1"
- H3 (`###`) - подразделы с тройной нумерацией (например, 3.1.1)
- H4 (`####`) - подподразделы с четверной нумерацией (например, 5.1.1.1)
- Формат: `## X.Y Название раздела`

### Схема нумерации

- Глава 1: разделы 1.1, 1.2, 1.3, 1.4
- Глава 2: разделы 2.1, 2.2, 2.3, ..., 2.9
- Глава 3: разделы 3.1, 3.2, 3.3
- И так далее

### Правила нумерации

- Номер главы отсутствует в H1
- Номер раздела присутствует в H2
- Подразделы используют тройную нумерацию в H3
- Конвертер должен сохранять номера разделов в формате `X.Y` точно так, как в исходном документе, без пропусков и изменений

### Избегание дублирования заголовков

- Не допускается повторение одинаковых заголовков в одном файле
- Каждый уровень заголовка должен использоваться последовательно
- H1 заголовок должен быть единственным в файле

### Примеры

- `# Общие сведения`
- `## 1.1 Функциональное назначение`
- `## 2.2 Состав плагинов`
- `### 3.1.1 Подраздел`
- `#### 5.1.1.1 sysctl`
- `#### 5.1.1.2 Tuned`

## 3. Специальные блоки

### AppAnnotation блок

Используется для важной информации/аннотаций и визуально выделяется цветным фоном:

```markdown
::AppAnnotation
Текст аннотации может быть многострочным.
Описывает ключевые моменты раздела.
::
```

### Критерии применения AppAnnotation

- Используется для длинных описательных блоков (2+ предложения)
- Применяется к обзорной и архитектурной информации
- Содержит ключевые концепции и определения
- Соседние короткие блоки объединяются в один большой AppAnnotation

### Фоновое выделение

- Других видов фонового выделения в образцах не обнаружено;
- Примечания отображаются через `blockquote`, что также создаёт серый фон у текста.

## 4. Списки

### Маркированные списки

- Используется символ `-` (дефис) с пробелом
- Поддерживается многоуровневая вложенность
- Длинные элементы списка могут переноситься на несколько строк

Примеры:

```markdown
- обеспечение разработчиков каталогом документации;
- предоставление примеров фрагментов кода;
- ускорение процессов разработки.
```

### Объединение абзацев в списки

Последовательные абзацы, представляющие пункты перечисления, должны объединяться в маркированный список. Каждый абзац становится элементом списка с маркером `-`.

### Критерии автоматического создания списков

Должны конвертироваться в маркированные списки:

- Последовательности задач, функций или компонентов
- Перечисления требований
- Списки технологий и инструментов
- Описания элементов архитектуры

### Описательные списки компонентов

Названия компонентов заключаются в обратные кавычки, описание отделяется длинным тире. Каждый элемент заканчивается точкой с запятой, последний — точкой.

```markdown
- `Компонент` — описание компонента;
- `Другой компонент` — его описание.
```

## 5. Таблицы

### Стандартные таблицы

```markdown
| Заголовок 1 | Заголовок 2 | Заголовок 3 |
| ----------- | ----------- | ----------- |
| Данные      | Данные      | Данные      |
```

### Таблицы с выравниванием

```markdown
| Левый | Центр | Правый |
| :---- | :---: | -----: |
| Левое | Центр | Правое |
```

### Переносы в ячейках

Для переносов строк в ячейках используется `<br>`:

```markdown
| Колонка                                |
| -------------------------------------- |
| Строка 1<br>Строка 2<br>Строка 3       |
| Windows 10;<br><br>Windows Server 2016 |
```

### Группировка строк и пустые ячейки

Для имитации объединённых ячеек используются отдельные строки с заполненной первой колонкой и пустыми остальными:

```markdown
| Браузер        | ОС         | Процессор       |
| -------------- | ---------- | --------------- |
| Google Chrome  |            |                 |
| Windows        | Windows 10 | Intel Pentium 4 |
| Linux          | Debian 10  | Intel Pentium 4 |
| Yandex Browser |            |                 |
| Windows        | Windows 7  | Intel Pentium 4 |
```

### Подписи к таблицам

После каждой таблицы идет подпись в формате blockquote:

```markdown
> Таблица X – Описание таблицы
```

## 6. Примечания и цитаты

### Примечания

```markdown
> _Примечание_ – Текст примечания.
> Может быть многострочным.
```

### Обычные blockquote

```markdown
> Обычная цитата без специального форматирования
```

## 7. Inline форматирование

### Код и технические термины

Используются обратные кавычки для:

- Названия ПО и фреймворков: `Winter CMS`, `PostgreSQL`, `Docker`
- Стандарты и языки программирования: `HTML5`, `CSS3`, `JavaScript`
- Протоколы и форматы: `HTTP(S)`, `TLS`, `JSON`, `YAML`
- Команды и утилиты: `sysctl`, `docker ps`, `systemctl`
- Названия компонентов в списках
- Любой inline-код

### Акценты

- Курсив для служебных элементов: _Примечание_
- Жирный для важных понятий (редко используется)

### Специальные символы

- Обычные кавычки для названий: "Портал разработчика"
- Двойные кавычки для строковых значений: "10240 65535"
- Длинные тире (—) в описаниях компонентов

## 8. Ссылки

### Внутренние ссылки с якорями

```markdown
[разделе 7](/developer/administrator/winter-cms)
[3.1](/developer/administrator/technical-requirements#_31-требования-к-программному-обеспечению)
[см. раздел 6.2](/developer/administrator/monitoring#_62-хранение-постоянных-данных)
```

### Ссылки на разделы той же страницы

```markdown
([см. раздел 5.1.5](/developer/administrator/setup-os#_515-оптимизация-файловой-системы-и-дискового-ввода-вывода))
```

### Внешние ссылки с описанием

```markdown
[формирование описано в официальной документации](https://doc.traefik.io/traefik/middlewares/http/basicauth/)
```

### Прямые ссылки

```markdown
[https://git.rosa.ru/](https://git.rosa.ru/)
```

## 9. Абзацы и разделение

### Интервалы

- Пустая строка между абзацами
- Пустая строка после заголовков
- Пустая строка после списков
- Пустая строка после таблиц и их подписей

### Длинные абзацы

Абзацы могут быть довольно длинными и содержать несколько предложений без принудительных переносов.

### Обработка повторяющегося контента

- Удаляются дублирующиеся абзацы
- Объединяются повторяющиеся фразы
- Проверяется уникальность ключевых конструкций

### Пунктуация

- Списки заканчиваются точкой с запятой, последний элемент - точкой
- Описания в списках компонентов заканчиваются точкой с запятой
- В таблицах точки обычно не ставятся

### Языковые особенности

- Документы на русском языке
- Соблюдается официально-деловой стиль
- Используется техническая терминология
- Названия стандартов: ISO/IEC 9075:2011

## 10. Обработка изображений

Изображения оформляются с использованием специального блока `::sign-image::`, который должен соответствовать следующим требованиям:

### Формат блока

```markdown
::sign-image
src: /images/[раздел]/[подраздел]/x.image-name.ext
sign: Рисунок X – Описание изображения
::
```

> TIP: в будущем в поле `src` можно (и нужно) будет писать {{ $doc.imgPath }}/[раздел]/1.image-name.ext  
> `{{ $doc.imgPath }}` будет содержать путь до каталога `images/[раздел]/[подразделы]` который соответствует договоренности,  
> что в каталоге `/public/images` подкаталоги соответствуют разделам документации (т.е. каталогу `content`).  

> Так же в будущем этот блок будет дополняться дополнительными параметрами, например `href` чтобы картинка стала ссылкой и т.д.

### Правила оформления

1. **Структура пути к изображению**:

   - Все изображения размещаются в директории `/images/[раздел]/[подраздел]/`
   - Второй уровень директории соответствует разделу документации (например, `start`, `user-interface-components`)
   - Имена файлов изображений имеют формат `x.image-name.ext`, где X - порядковый номер изображения

2. **Формат подписи**:

   - Подпись всегда начинается с "Рисунок X – ", где X - порядковый номер
   - После тире следует описание изображения
   - Технические термины и названия интерфейсных элементов выделяются обратными кавычками: `РОСА ID`
   - Названия разделов и компонентов заключаются в обычные кавычки: "Раздел "РОСА Мобайл""

3. **Расположение блока**:

   - Блок изображения размещается непосредственно после упоминания в тексте (например, после "(рисунок 1)")
   - Перед блоком изображения должна быть пустая строка
   - После блока изображения должна быть пустая строка

### Примеры правильного оформления

После успешной авторизации пользователю открывается главная страница Комплекса (рисунок 3).

::sign-image
src: /images/developer/user/user-interface-components/picture_3.png
sign: Рисунок 3 – Главная страница Портала разработчика
::

Через верхнее навигационное меню осуществляется переход к основным разделам Комплекса:
Раздел "РОСА Мобайл" (рисунок 4) предоставляет пользователю обзорную информацию.

::sign-image
src: /images/developer/user/user-interface-components/picture_4.png
sign: Рисунок 4 – Раздел "РОСА Мобайл"
::

Пользователь также может ознакомиться со следующими информационными блоками в данном разделе:
для ранее зарегистрированных пользователей: нажать на кнопку Войти и выполнить авторизацию через систему `РОСА ID` (рисунок 1);

::sign-image
src: /images/developer/user/start/picture_1.png
sign: Рисунок 1 – Вход в учетную запись `РОСА ID`
::

### Особенности

- Если в подписи упоминаются технические термины или названия интерфейсных элементов, они должны быть выделены обратными кавычками
- Названия разделов и компонентов системы заключаются в обычные кавычки
- Порядковые номера изображений должны соответствовать нумерации в тексте документа
- Не допускается дублирование номеров изображений в рамках одного раздела документации

## 11. Блоки кода

### Указание языка программирования и имени файла

````markdown
```yaml docker-compose.yaml
version: "3"
services:
  web:
    image: nginx
```
````

### Терминальные команды с указанием Terminal

````markdown
```bash Terminal
sudo dnf install docker docker-compose
```
````

### Обычные блоки кода с языком

````markdown
```bash
sysctl -w net.core.somaxconn=1024
```
````

### Конфигурационные файлы

````markdown
```conf tuned.conf
[main]
include = throughput-performance
```
````

### Многострочные YAML блоки

````markdown
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: cpu-affinity-example
```
````

## 12. HTML таблицы для сложного форматирования

Когда стандартные Markdown таблицы не подходят из-за сложной структуры, используются HTML таблицы:

```html
<div class="joplin-table-wrapper">
  <table>
    <thead>
      <tr>
        <th>Параметр</th>
        <th>Команды</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
          <p>vm.swappiness</p>
          <p>Управляет склонностью ядра использовать swap...</p>
        </td>
        <td>
          <p>Проверка текущего значения:</p>
          <p>sysctl vm.swappiness</p>
        </td>
      </tr>
    </tbody>
  </table>
</div>
```

