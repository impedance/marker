---
title: Архитектура комплекса
---

# Архитектура комплекса

::AppAnnotation
Программный комплекс "Портал разработчика" построен по модульной архитектуре.
Архитектура реализована на базе Winter CMS и включает серверную часть (бэкенд) для администрирования и у
правления контентом, а также клиентскую часть, доступную пользователям через веб-интерфейс браузера.
Клиентская часть предоставляет разработчикам доступ к функциональности портала, включая документацию,
шаблоны, примеры кода и другие ресурсы, необходимые для разработки ПО для "РОСА Мобайл".

Комплекс разворачивается в контейнеризированной среде (`Docker`) и взаимодействует с внешними сервисами
аутентификации и хранения данных.
::

## 2.1 Основные компоненты

Состав архитектуры Комплекса включает в себя следующие части:

- CMS-сервер (`Winter CMS`) — основной элемент серверной части. Обеспечивает управление структурой, содержимым и логикой портала;
- плагины `Winter CMS` — модули, расширяющие функциональность CMS;
- обратный прокси (`Traefik`) — обеспечивает маршрутизацию и балансировку трафика между компонентами;
- СУБД `PostgreSQL` — хранение основной структурированной информации;
- кеширующая система `Redis` — хранение сессий и промежуточных данных;
- система поиска `Typesense` — полнотекстовый поиск по материалам портала;
- интеграция с внешней системой аутентификации РОСА ID.

## 2.2 Состав плагинов

В состав Комплекса входят следующие служебные плагины локальной разработки:

- `Local` – модуль расширения ядра CMS и настройки среды;
- `Local.Author` – управление авторами контента;
- `Local.OAuth` – реализация авторизации через сервис ROSA ID;
- `Local.PagesViewBag` – передача дополнительных данных на страницы;
- `Local.Search` – интеграция поиска с использованием Typesense;
- `Local.Snippets` – внедрение переиспользуемых блоков контента;
- `Local.VideoBlog` – реализация функциональности видеоблога.

Сторонние и системные плагины в составе Комплекса:

- `Winter.Blog` – настройка блога;
- `Winter.Pages` – настройки страницы;
- `Winter.Sitemap` – настройки карты сайта;
- `Winter.Translate` – настройки мультиязычности;
- `Winter.User` — стандартные модули CMS Winter;
- `StudioBosco.SeoExtension` — настройка параметров SEO;
- `WebVPF.Robots` — настройка правил индексации (robots.txt).

## 2.3 Система управления файлами

В состав Комплекса входит файловое хранилище, доступное из интерфейса CMS и через директории Docker-контейнеров. Файлы включают:

- загружаемые пользователями ресурсы (медиафайлы);
- журналы событий;
- скомпилированные шаблоны страниц;
- кешированные данные.

В Комплексе реализовано двухуровневое кеширование данных:

- на диске — редко изменяемые статические ресурсы;
- в системе `Redis` — сессии, задачи и динамически изменяемые данные.

Работа с Комплексом осуществляется под выделенной учетной записью, при этом доступ к файлам
ограничен на уровне файловой системы, что обеспечивает дополнительный уровень безопасности.

Каждое окружение (стенд) использует уникальное хранилище, исключающее пересечения и взаимное влияние данных.

## 2.4 База данных

В качестве системы управления базами данных в составе Комплекса используется `PostgreSQL`.
Контейнеры базы данных запускаются с использованием отдельной системной учетной записи,
что обеспечивает изоляцию и повышенную безопасность.

Доступ к данным СУБД ограничен на уровне ОС и конфигурации контейнеров.

## 2.5 Интеграция с сервисом РОСА ID

Комплекс интегрирован с системой аутентификации РОСА ID,
через которую осуществляется авторизация пользователей и администраторов Комплекса.
РОСА ID выполняет роль idP (Identity Provider), который реализован по стандарту OAuth с поддержкой OpenID.
В сервисе используется механизм JSON Web Token (JWT) для защиты сессий и запросов.

Функциональные зоны РОСА ID:

- неавторизованная зона — регистрация, вход в Портал разработчика;
- личный кабинет пользователя — доступ к персональным данным, настройкам безопасности (включая двухфакторную аутентификацию), управлению устройствами и подключению внешних сервисов.

## 2.6 Winter CMS

В качестве системы управления содержимым в составе Комплекса используется `Winter CMS` — программная платформа,
основанная на фреймворке `Laravel`. `Winter CMS` обеспечивает управление содержимым, настройку
пользовательского интерфейса, а также взаимодействие с модулями и плагинами, реализующими функциональные
компоненты Портала разработчика.

`Winter CMS` предназначена для:

- создания и редактирования веб-страниц с использованием визуального редактора;
- управления статическим и динамическим содержимым;
- организации структуры Портала разработчика;
- настройки ролей пользователей и прав доступа;
- централизованного управления медиафайлами;
- интеграции с расширениями и плагинами, реализующими дополнительный функционал.

`Winter CMS` реализует гибкую систему разграничения прав доступа.
Управление осуществляется на основе ролей, которым присваиваются соответствующие разрешения.

Подробнее о рабочем интерфейсе `Winter CMS` см. в [разделе 7](/developer/administrator/winter-cms).
Управление контентом через `Winter CMS`.

## 2.7 Сетевое взаимодействие и шифрование трафика

Сетевое взаимодействие в Комплексе организовано по модели клиент-сервер,
при которой взаимодействие между пользовательскими устройствами и серверной частью Комплекса
осуществляется через защищённые каналы связи.

Для обмена данными используется протокол HTTPS, обеспечивающий защищённую передачу информации между
клиентской и серверной частями.

Шифрование трафика реализуется с использованием протокола TLS (Transport Layer Security),
что предотвращает возможность перехвата, модификации или подмены передаваемых данных.

Управление шифрованием и маршрутизацией запросов осуществляется с использованием обратного прокси-сервера
`Traefik`, который автоматически обрабатывает сертификаты, управляет SSL-терминацией и обеспечивает
маршрутизацию запросов между компонентами.

## 2.8 Обеспечение отказоустойчивости

Комплекс реализует базовую отказоустойчивость за счёт использования встроенных механизмов мониторинга
состояния контейнеров в среде `Docker`.

Каждый контейнер, задействованный в работе Комплекса, конфигурируется с использованием директивы `HEALTHCHECK`,
которая позволяет Комплексу проверять текущее состояние сервиса.

При выявлении нарушения работоспособности (отсутствие отклика, ошибки приложения и т. д.) контейнер
считается неработоспособным, и Комплекс автоматически инициирует его перезапуск.

Данный механизм позволяет минимизировать простой сервисов и обеспечить базовую автоматическую
реакцию на внутренние сбои без участия администратора.

## 2.9 Масштабируемость

Архитектура Портала разработчика предусматривает вертикальное масштабирование, что позволяет адаптировать
Комплекс к увеличению нагрузки без изменения количества узлов.

Масштабирование реализуется за счёт увеличения вычислительных ресурсов выделенных серверов:

- оперативной памяти (RAM);
- вычислительной мощности процессора (CPU).

Вертикальный подход к масштабированию позволяет повысить производительность сервисов без необходимости
внедрения кластеризации или распределённых вычислений, упрощая сопровождение Комплекса и снижая
требования к инфраструктуре.
