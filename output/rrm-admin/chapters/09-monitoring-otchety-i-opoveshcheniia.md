## 9 Мониторинг, отчеты и оповещения

### 9.1 Панель мониторинга

Панель мониторинга загружается по умолчанию при входе в веб-интерфейс РОСА Менеджер ресурсов, а также является доступной в меню "Обзор  Панель мониторинга" панели навигации (рисунок 144).

Панель мониторинга

Панель мониторинга содержит настраиваемый набор виджетов (модулей), отображающих информацию в графическом (диаграмма) и текстовом (таблица с данными) виде о состоянии объектов мониторинга.

Также панель мониторинга содержит кнопку Уведомления, при нажатии на которую становится доступным список полученных оповещений (сообщений, предупреждений) о контролируемых событиях в Комплексе.

#### 9.1.1 Добавление виджета на панель мониторинга

Для добавления виджета на панель мониторинга нужно нажать кнопку Добавить виджет, после чего выбрать необходимый виджет из раскрывающегося списка с доступными виджетами. Следует обратить внимание, что в этом списке будут доступны для выбора только те виджеты, которые в данный момент не отображаются на панели мониторинга.

Для восстановления набора виджетов, отображаемых на панели мониторинга по умолчанию, следует нажать пиктограмму .

#### 9.1.2 Управление виджетами на панели мониторинга

Управление виджетами на панели мониторинга осуществляется с использованием функциональных пиктограмм, приведенных в таблице 10. Для выполнения определенного действия нужно выбрать виджет на панели мониторинга и нажать соответствующую пиктограмму.

Пиктограммы управления виджетами

### 9.2 Виджеты

Виджет является конструктивным элементом панели мониторинга и представляет собой графический или текстовый модуль, отображающий определенные данные.

В Комплексе используются и могут быть созданы следующие типы виджетов:

виджет отчета с табличным представлением данных;

виджет диаграммы с графическим представлением данных;

виджет меню с отображением заданной структуры.

#### 9.2.1 Создание виджета отчета

Создание виджета отчета с табличным представлением данных осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Обзор → Отчеты";

развернуть аккордеон "Виджеты панели мониторинга" и выбрать папку "Отчеты";

нажать кнопку Конфигурация, затем – Добавить новый виджет;

на экране появится интерфейс добавления в Комплекс нового виджета (рисунок 145), который содержит параметры виджета, распределенные по секциям для последовательной настройки;

Добавление нового виджета отчета

в соответствующих полях секции "Основные сведения" ввести заголовок (наименование) и краткое описание нового виджета. По умолчанию новый виджет становится активным сразу после создания. При необходимости снимают флажок "Активно" для деактивации виджета;

в секции "Параметры отчетов" используют фильтры для выбора необходимых предварительно созданных отчетов, выбирают от одного до четырех столбцов с данными из этих отчетов и указывают количество отображаемых строк с информацией для этого виджета;

в секции "Таймер" задают временной интервал обновления данных виджета следующим образом:

из раскрывающегося списка "Запустить" выбрать необходимый интервал – "Каждый час", "Каждый день", "Каждую неделю" или "Каждый месяц"; из списка "каждый" выбрать период для выбранного интервала;

выбрать требуемое значение из раскрывающегося списка "Часовой пояс";

выбрать дату начала обновления данных в соответствующем поле;

в поле "Время начала" выбрать время начала обновления данных в 24-часовом формате;

Примечание – Следует обратить внимание, что при изменении часового пояса также потребуется переустановить значения даты и времени начала обновления данных виджета.

в секции "Доступ" выбирают одно из следующих значений, определяющих доступность виджета для пользователей:

"Всем пользователям" – виджет доступен всем пользователям;

"По ролям" – виджет доступен только пользователям с указанными ролями; роли выбирают флажками из появившегося перечня;

"По группам" – виджет доступен только пользователям из выбранных групп; группы выбирают флажками из появившегося перечня;

нажать кнопку Добавить для сохранения вновь созданного виджета или Отмена – для отказа от сохранения.

#### 9.2.2 Создание виджета диаграммы

Создание виджета диаграммы с графическим представлением данных осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Обзор → Отчеты";

развернуть аккордеон "Виджеты панели мониторинга" и выбрать папку "Диаграммы";

нажать кнопку Конфигурация, затем – Добавить новый виджет;

на экране появится интерфейс добавления в Комплекс нового виджета (рисунок 146), который содержит параметры виджета, распределенные по секциям для последовательной настройки;

Добавление нового виджета диаграммы

в соответствующих полях секции "Основные сведения" ввести заголовок (наименование) и краткое описание нового виджета. По умолчанию новый виджет становится активным сразу после создания. При необходимости снимают флажок "Активно" для деактивации виджета;

в секции "Отчет диаграммы" используют фильтр для выбора необходимой диаграммы с данными для отображения в этом виджете;

в секции "Таймер" задают временной интервал обновления данных виджета следующим образом:

из раскрывающегося списка "Запустить" выбрать необходимый интервал – "Каждый час", "Каждый день", "Каждую неделю" или "Каждый месяц"; из списка "каждый" выбрать период для выбранного интервала;

выбрать требуемое значение из раскрывающегося списка "Часовой пояс";

выбрать дату начала обновления данных в соответствующем поле;

в поле "Время начала" выбрать время начала обновления данных в 24-часовом формате;

Примечание – Следует обратить внимание, что при изменении часового пояса также потребуется переустановить значения даты и времени начала обновления данных виджета.

в секции "Доступ" выбирают одно из следующих значений, определяющих доступность виджета для пользователей:

"Всем пользователям" – виджет доступен всем пользователям;

"По ролям" – виджет доступен только пользователям с указанными ролями; роли выбирают флажками из появившегося перечня;

"По группам" – виджет доступен только пользователям из выбранных групп; группы выбирают флажками из появившегося перечня;

нажать кнопку Добавить для сохранения вновь созданного виджета или Отмена – для отказа от сохранения.

#### 9.2.3 Создание виджета меню

Создание виджета меню с отображением заданной структуры осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Обзор → Отчеты";

развернуть аккордеон "Виджеты панели мониторинга" и выбрать папку "Меню";

нажать кнопку Конфигурация, затем – Добавить новый виджет;

на экране появится интерфейс добавления в Комплекс нового виджета, который содержит параметры виджета, распределенные по секциям для последовательной настройки (рисунок 147);

Добавление нового виджета меню

в соответствующих полях секции "Основные сведения" ввести заголовок (наименование) и краткое описание нового виджета. По умолчанию новый виджет становится активным сразу после создания. При необходимости снимают флажок "Активно" для деактивации виджета;

в секции "Ярлыки меню" используют значения из раскрывающегося списка "Добавить ярлык" для формирования виджета со структурой меню, состоящего из выбранных (добавленных в виджет) ссылок (ярлыков) на элементы пользовательского интерфейса Комплекса; для удаления ярлыка меню можно воспользоваться кнопкой ;

в секции "Доступ" выбирают одно из следующих значений, определяющих доступность виджета для пользователей:

"Всем пользователям" – виджет доступен всем пользователям;

"По ролям" – виджет доступен только пользователям с указанными ролями; роли выбирают флажками из появившегося перечня;

"По группам" – виджет доступен только пользователям из выбранных групп; группы выбирают флажками из появившегося перечня;

нажать кнопку Добавить для сохранения вновь созданного виджета или Отмена – для отказа от сохранения.

#### 9.2.4 Редактирование параметров виджета

Редактирование параметров виджета осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Обзор → Отчеты";

развернуть аккордеон "Виджеты панели мониторинга" и выбрать требуемый виджет;

нажать кнопку Конфигурация и выбрать одно из трех действий:

Редактировать этот виджет – внести необходимые изменения в значения параметров виджета;

Копировать этот виджет – указать уникальные наименование и описание для скопированного виджета в поле "Заголовок" и "Описание" и при необходимости внести изменения в значения других параметров виджета;

Удалить этот виджет из БД – удалить виджет, подтвердив действие нажатием кнопки Да в появившемся модальном окне;

Примечание – Удаление виджетов, предоставляемых в Комплексе по умолчанию, недоступно. Администратору доступны для удаления только виджеты, созданные пользователями.

нажать кнопку Сохранить / Добавить для сохранения изменения, Сбросить – для сброса проведенных изменений или Отмена – для отмены редактирования виджета.

#### 9.2.5 Импорт и экспорт виджетов

Импорт и экспорт виджетов в Комплексе осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Обзор → Отчеты";

развернуть аккордеон "Импорт/Экспорт" и выбрать пункт "Виджеты";

в появившейся панели "Импорт / Экспорт" (рисунок 148):

Импорт/Экспорт виджета

в секции "Импорт" нажать кнопку Выберите файл, после чего выбрать файл импортируемого виджета и нажать Отправить;

в секции "Экспорт" выбрать один или несколько экспортируемых виджетов и нажать кнопку Экспорт; сохранить файл экспортируемого виджета стандартными средствами браузера.

Примечание – Операции экспорта и импорта виджетов могут выполняться между различными экземплярами РОСА Менеджер ресурсов одинаковой версии.

#### 9.2.6 Получение данных для виджета в реальном времени

Запуск процесса получения данных для виджета в реальном времени вместо запланированного обновления данных по расписанию осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Обзор → Отчеты";

развернуть аккордеон "Виджеты панели мониторинга" и выбрать необходимый виджет;

нажать кнопку Конфигурация, в появившемся меню выбрать Создать содержимое виджета сейчас;

подтвердить действие нажатием кнопки Да в появившемся модальном окне.

Примечание – Получение данных в реальном времени возможно для виджета отчета и виджета диаграммы.

### 9.3 Отчеты

Интерфейс раздела "Отчеты", доступного в меню вкладки "Обзор" панели навигации, предназначен для формирования, управления, просмотра пользовательских и системных отчетов в зависимости от прав доступа конкретного пользователя в Комплексе.

В РОСА Менеджер ресурсов для организации расположения отчетов, навигации и доступа используется меню отчетов, которое имеет следующую иерархическую структуру:

аккордеоны;

каталоги;

отчеты.

РОСА Менеджер ресурсов предоставляет пользователю набор системных отчетов, созданных по умолчанию и распределенных по каталогам. Эти каталоги с системными отчетами, в свою очередь, сгруппированы по тематическим категориям, которые отображаются в виде следующих аккордеонов меню отчетов:

"Управление конфигурацией (Configuration Management)" – каталоги этого аккордеона содержат системные отчеты c информацией об оборудовании, сети, ОС, приложениях, службах, идентификаторах и учетных записях пользователей, снимках ВМ;

"Готовность ВМ к миграции (Migration Readiness)" – каталоги этого аккордеона содержат системные отчеты c информацией, необходимой для миграции ВМ;

"Выполняемые процессы (Running Processes" – каталоги этого аккордеона содержат системные отчеты c выполняемых процессах на ВМ;

"Операции (Operations)" – каталоги этого аккордеона содержат системные отчеты о функционировании РОСА Менеджер ресурсов, а также о состоянии питания и свободном дисковом пространстве на ВМ;

"Оптимизация (Optimization)" – каталоги этого аккордеона содержат системные отчеты об оптимизации аппаратных ресурсов;

"Разрастание ВМ (VM Sprawl)" – каталоги этого аккордеона содержат системные отчеты c информацией об использовании и расходе дискового пространства ВМ;

"События (Events)" – каталоги этого аккордеона содержат системные отчеты о событиях управления операциями и конфигурацией;

"Производительность по типу активов (Performance by Asset Type)" – каталоги этого аккордеона содержат системные отчеты c информацией о производительности виртуальной инфраструктуры;

"Запущенные процессы (Running Processes)" – каталоги этого аккордеона содержат системные отчеты c информацией о процессах, запущенных на ВМ;

"Тенденции (Trending)" – каталоги этого аккордеона содержат системные отчеты c прогнозом изменения объема хранилища данных, а также с прогнозом использования ЦП и оперативной памяти;

"Предоставление ВМ (Provisioning)" – каталоги этого аккордеона содержат системные отчеты c информацией о действиях, выполненных в процессе предоставления ВМ на основании утвержденного запроса;

"Арендаторы (Tenants)" – каталоги этого аккордеона содержат системные отчеты c информацией о квотах и ограничениях на используемые ресурсы по каждому арендатору;

"События AutoSDE (AutoSDE Events)" – каталоги этого аккордеона содержат отчеты c информацией о событиях поставщика AutoSDE;

"Отношения (Relationships)" – каталоги этого аккордеона содержат отчеты c информацией об отношениях между объектами и ресурсами.

#### 9.3.1 Формирование отчета

Запуск процесса формирования отчета может осуществляться как пользователем вручную, так и в автоматическом режиме по расписанию.

В процессе формирования все отчеты предварительно помещаются в очередь, при этом отображается визуальный индикатор состояния каждого отчета: "В очереди" или "Выполнено".

Подготовленные отчеты автоматически сохраняются и становятся доступными для просмотра.

##### 9.3.1.1 Формирование отчета пользователем

Запуск процесса формирования отчета вручную осуществляется пользователем выполнением следующих действий:

в меню панели навигации выбрать пункт "Обзор → Отчеты";

развернуть аккордеон "Отчеты" и выбрать в меню пункт "Все отчеты";

из каталогов с отчетами выбрать требуемый отчет;

нажать кнопку Конфигурация, затем – Поместить в очередь.

В результате выбранный отчет будет поставлен в очередь на формирование, а состояние отчета будет отображаться в виде индикатора – "В очереди (Queued)" или "Выполнено (Finished)" (рисунок 149).

Состояния отчета

##### 9.3.1.2 Автоматическое формирование отчета по расписанию

Применение расписания позволяет в автоматическом режиме не только формировать отчеты, но и при необходимости осуществлять рассылку подготовленных отчетов на электронную почту указанным пользователям (при наличии подключения Комплекса к внешнему почтовому серверу).

Настройка расписания для автоматического формирования отчетности осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Обзор → Отчеты".

для добавления расписания к выбранному отчету:

развернуть аккордеон "Отчеты" и выбрать требуемый отчет;

нажать кнопку Конфигурация и выбрать Добавить новое расписание;

на экране появится интерфейс добавления расписания с параметрами расписания, распределенными по секциям для последовательной настройки;.

перейти к выполнению пункта в) выполняемых действий;

или для создания общего расписания, применимого к группе отчетов:

развернуть аккордеон "Расписания";

нажать кнопку Конфигурация и выбрать Добавить новое расписание;

на экране появится интерфейс добавления расписания, который содержит параметры расписания, распределенные по секциям для последовательной настройки;

в соответствующих полях секции "Основные сведения" ввести имя (наименование) и описание расписания. По умолчанию расписание становится активным сразу после создания. При необходимости для деактивации расписания снимают флажок "Активно";

при добавлении общего расписания используют фильтры в секции "Выбор отчета" для выбора необходимых отчетов, к которым будет применяться это расписание;

в секции "Таймер" нужно задать временной интервал формирования отчетности (выполнения расписания) следующим образом:

из раскрывающегося списка "Запустить" выбрать необходимый интервал (для интервалов дополнительно можно указать период выполнения с помощью списка "каждый"):

"Один раз" – разовое выполнение расписания;

"Каждый час" – выполнение расписания с интервалом через дополнительно указанное количество часов;

"Ежедневно" – выполнение расписания с интервалом через дополнительно указанное количество дней;

"Каждую неделю";

"Каждый месяц";

выбрать дату начала обновления данных в соответствующем поле;

в поле "Время начала" выбрать время начала обновления данных в 24-часовом формате.

при необходимости настроить рассылку исходящих сообщений, содержащих ссылку на отчет или непосредственно сформированный отчет в виде вложения, на электронную почту указанным пользователям следующим образом:

установить флажок "Послать письмо" в секции "Послать письмо после запуска";

в поле "От" указать адрес электронной почты отправителя или оставить это поле пустым для значения, настроенного по умолчанию;

в поле "Добавить пользователя" указать имя получателя (пользователя, существующего в Комплексе); для получения сообщений этот пользователь должен иметь зарегистрированный адрес электронной почты, указанный в его учетной записи;

опционально можно ввести адрес электронной почты любого пользователя вручную в поле "Добавить" и нажать пиктограмму ; адрес появится в поле рассылки "Кому/Куда"; для удаления из отправки нужно нажать на адрес;

При необходимости можно настроить дополнительные параметры рассылки сообщений в секции "Опции почты":

установить флажок "Послать, если отчет пустой" для рассылки сообщения даже в случае отсутствия записей в сформированном отчете;

для прикрепления сформированного отчета к сообщению в виде вложения выбрать необходимый формат файла отчета – "Текст" или "CSV";

нажать кнопку Добавить для добавления расписания или Отмена – для отказа.

##### 9.3.1.3 Изменение расписания формирования отчетности

Изменение параметров расписания осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Обзор → Отчеты";

развернуть аккордеон "Расписания" и выбрать необходимое расписание;

нажать кнопку Конфигурация и выбрать Изменить это расписание;

внести необходимые изменения в значения параметров расписания.

нажать кнопку Сохранить.

Для выполнения других действий с расписанием можно выбрать альтернативные пункты меню после нажатия на кнопку Конфигурация:

Удалить это расписание – удалить выбранное расписание, подтвердив нажатием кнопки Да в появившемся модальном окне;

Включить это расписание – включить выбранное расписание, если ранее оно было отключено;

Отключить это расписание – отключить выбранное расписание, если ранее оно было включено.

##### 9.3.1.4 Выполнение расписания вне запланированного времени

При необходимости выполнение расписания вне запланированного времени осуществляется в текущий момент пользователем вручную выполнением следующих действий:

в меню панели навигации выбрать пункт "Обзор → Отчеты";

развернуть аккордеон "Расписания" и выбрать необходимое расписание;

нажать кнопку Конфигурация и выбрать Поставить это расписание в очередь на выполнение сейчас.

#### 9.3.2 Просмотр отчета

Просмотр предварительно сформированного отчета осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Обзор → Отчеты";

развернуть аккордеон "Сохранённые отчеты" или аккордеон "Отчеты";

нажать на наименование необходимого экземпляра отчета.

При выборе просмотра на шаге б) аккордеона "Отчеты" в требуемом отчете следует переключиться на вкладку "Сохранённые отчеты" (рисунок 150).

Вкладка "Сохранённые отчеты"

Для некоторых категорий отчетов следует нажать на соответствующие пиктограммы для изменения вида отображения данных при просмотре:

– для просмотра отчета в графическом представлении данных;

– для просмотра отчета в гибридном (графическом и табличном) представлении данных;

– для просмотра отчета в табличном (текстовом) представлении данных.

Примечание – В табличном или гибридном представлении данных можно нажать на заголовок столбца отчета для сортировки значений в этой графе по возрастанию или убыванию.

Для применения фильтров к отображаемым данным отчета нужно нажать пиктограмму , после чего выбрать необходимые критерии фильтрации из раскрывающегося меню и/или ввести поисковый запрос.

Для просмотра выбранного экземпляра отчета в полноэкранном режиме нажать кнопку Конфигурация, после чего выбрать Показать полноэкранный отчет.

#### 9.3.3 Загрузка отчета и вывод на печать

Загрузка файла отчета и вывод отчета на печать осуществляются выполнением следующих действий:

в меню панели навигации выбрать пункт "Обзор → Отчеты";

развернуть аккордеон "Сохраненные отчеты" или аккордеон "Отчеты";

выбрать необходимый экземпляр отчета;

нажать на кнопку Скачать и выбрать:

Скачать как текст – для загрузки файла отчета в текстовом формате;

Скачать как CSV – для загрузки файла отчета в формате CSV;

Печать или экспорт в PDF – для вывода отчета на печать или в формат PDF.

#### 9.3.4 Добавление пользовательского отчета

Добавление нового пользовательского отчета в Комплекс осуществляется выполнением следующих действий.

в меню панели навигации выбрать пункт "Обзор → Отчеты";

развернуть аккордеон "Отчеты" и выбрать в меню пункт "Все отчеты";

нажать кнопку Конфигурация и выбрать Добавить новый отчет;

на экране появится интерфейс "Добавление нового отчета", который содержит параметры отчета, распределенные по вкладкам для последовательной настройки (рисунок 151):

Добавление нового отчета

во вкладке "Столбцы" выполнить следующие действия:

в соответствующих полях секции "Базовые сведения об отчете" указать уникальное имя меню (наименование отчета для отображения в общем списке) и внутренний заголовок отчета;

в секции "Настроить столбцы отчета" выбрать таблицу, содержащую необходимую для отчета информацию, из раскрывающегося списка "Отчет основан на";

в списке "Доступные поля" выбрать необходимые поля и теги, которые будут являться столбцами нового отчета, нажимают кнопку переноса  для отображения столбов в списке "Выбранные поля" или кнопку  для их исключения из отчета.

при необходимости использовать следующие кнопки сортировки списка "Выбранные поля" для изменения итогового порядка столбцов в отчете:

– для перемещения выбранного элемента в начало списка;

– для перемещения выбранного элемента на одну позицию вверх в списке;

– для перемещения выбранного элемента на одну позицию вниз в списке;

– для перемещения выбранного элемента в конец списка;

Примечание – Следует обратить внимание, что выбор другой таблицы из раскрывающегося списка "Отчет основан на" приведет к сбросу всех ранее выбранных значений для столбцов отчета.

перейти на вкладку "Консолидация", чтобы трансформировать отдельные числовые записи выбранных столбцов отчета в вычисленные (максимальные, минимальные, средние или суммарные) значения (рисунок 152); при необходимости в консолидации данных выбрать столбцы с числовыми значениями для группировки и требуемое вычислительное действие ("Минимум  (Minimum)", "В среднем (Average)", "Максимум (Maximum)" или "Всего (Total)") из раскрывающегося списка в графе "Расчеты";

Вкладка "Консолидация"

перейти на вкладку "Форматирование" (рисунок 153), чтобы:

Вкладка "Форматирование"

в секции "Вывод в PDF" выбрать необходимый размер страницы отчета в формате PDF из соответствующего раскрывающегося списка; размер страницы по умолчанию – А4 (210 мм  297 мм);

в соответствующих графах секции "Заголовки и форматы столбцов" ввести наименование заголовка для каждого столбца отчета, а для столбцов с числовыми значениями выбрать необходимый числовой формат;

перейти на вкладку "Стили", чтобы выбрать стиль (цвет текста и/или фон) для каждого столбца отчета (рисунок 154); при необходимости настроить условия с использованием математических операторов и процентных соотношений для задания оттенка (цвета текста или фона столбца), отличного от значения по умолчанию;

Стили столбцов отчета

перейти на вкладку "Фильтр" (рисунок 155), чтобы последовательно настроить необходимые фильтры для данных, отображаемых в отчете, используя следующие варианты, выбираемые из верхнего раскрывающегося списка фильтра:

"Поле" – для создания критерия фильтрации на основе значений в указанном столбце (например, отображать в отчете данные только для ВМ с количеством ЦП меньше 2);

"Количество" – для создания критерия фильтрации на основе любого количественного значения (например, отображать в отчете данные только для ВМ с количеством снимков больше или равно 3);

"Тег" – для создания критерия фильтрации на основе тегов, присвоенных ресурсам;

"Найти" – для поиска заданного значения и проверки этого значения на соответствие указанному условию.

Фильтр по значению в столбце

Для составления сложных фильтров используются кнопки "Добавить условия:" . Далее следует нажать кнопку Зафиксировать для сохранения настройки фильтра.

Примечание – Все примененные фильтры будут отображаться в нижней части сформированного отчета.

перейти на вкладку "Сводные данные" (рисунок 156), чтобы настроить критерий сортировки данных, отображаемых в отчете, выбором из раскрывающихся списков:

Вкладка "Сводные данные"

"Сортировать отчет по" – выбрать столбец, по значениям в котором будет осуществляться основная (первичная) сортировка данных в отчете;

"Порядок сортировки" – выбрать сортировку "По возрастанию" или "По убыванию";

"Показать маркеры окончания сортировки" – выбрать "Да", "Нет" или "Количества" (для отображения маркеров количества при сортировке числовых значений);

"Скрыть строки детализации" – отметить флажком", чтобы скрыть;

"Форматировать в строке итогов" – выбрать способ форматирования итогов "Нет", "Откатить к значениям по умолчанию", "Удобочитаемое название модели", "Усеченная до 50 символов строка";

"В пределах поля выше, сортировать по" – выбрать столбец, по значениям в котором будет осуществляться последующая (вторичная) сортировка данных в отчете.

перейти на вкладку "Диаграммы" (рисунок 157), чтобы при необходимости создать диаграмму для отчета:

Вкладка "Диаграммы"

из раскрывающегося списка "Тип диаграммы" выбрать тип диаграммы;

из раскрывающегося списка "Режим диаграммы" выбрать источник данных : "Количества" или "Значения";

из раскрывающегося списка "Топовые значения для показа" выбрать количество топовых (важных по сравнению с другими) значений, которые будет отображать диаграмма;

для отображения общего количества значений в отчете установить флажок "Суммировать 'Другие' значения";

Примечание – Достижение ожидаемого результата при создании диаграммы зависит от формата столбцов в отчете и последовательности сортировки этих столбцов.

перейти на вкладку "Предварительный просмотр", в которой можно нажать кнопку  Создать предварительный просмотр отчета для просмотра образца отчета (рисунок 158);

Вкладка "Предварительный просмотр"

нажать кнопку Добавить для добавления отчета в Комплекс или Отмена – для отказа.

Следует обратить внимание, что после добавления нового отчета в Комплекс необходимо разместить этот отчет в один из каталогов меню отчетов (см. подраздел 9.3.10), чтобы новый отчет стал доступен для управления в РОСА Менеджер ресурсов через меню отчетов.

#### 9.3.5 Редактирование параметров отчета

Редактирование параметров пользовательского отчета осуществляется выполнением следующих действий.

в меню панели навигации выбрать пункт "Обзор → Отчеты";

развернуть аккордеон "Отчеты" и выбрать в каталогах "Моя компания  Настраиваемый" требуемый пользовательский отчет;

нажать кнопку Конфигурация и выбрать Редактировать этот отчет;

указать уникальное наименование для скопированного отчета в поле "Имя меню" вкладки "Столбцы" и при необходимости внести изменения в значения других параметров отчета;

нажать кнопку Добавить.

Примечание – Редактирование системных отчетов в РОСА Менеджер ресурсов недоступно. Администратору доступны для редактирования пользовательские отчеты, а пользователю – только его собственные отчеты.

#### 9.3.6 Копирование отчета

Для создания нового пользовательского отчета на основе существующего (пользовательского или системного) отчета нужно выполнить копирование базового отчета и внести необходимые изменения в значения параметров скопированного отчета.

Копирование отчета осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Обзор → Отчеты";

развернуть аккордеон "Отчеты" и выбрать в каталогах "Моя компания  Настраиваемый" требуемый пользовательский отчет;

нажать кнопку Конфигурация и выбрать Копировать это отчет;

указать уникальное наименование для скопированного отчета в поле "Имя меню" вкладки "Столбцы" и при необходимости внести изменения в значения других параметров отчета;

нажать кнопку Добавить.

#### 9.3.7 Удаление отчета

Удаление пользовательского отчета осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Обзор → Отчеты";

развернуть аккордеон "Отчеты" и выбрать в меню пункт "Все отчеты";

выбрать необходимый отчет;

нажать кнопку Конфигурация и выбрать Удалить этот отчет из БД;

нажать кнопку OK.

Примечание – Удаление системных отчетов в РОСА Менеджер ресурсов недоступно. Администратору доступны для удаления пользовательские отчеты, а пользователю – только его собственные отчеты.

#### 9.3.8 Экспорт отчета

Экспорт пользовательского отчета из РОСА Менеджер ресурсов осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Обзор → Отчеты";

развернуть аккордеон "Импорт/Экспорт" и выбрать пункт "Настраиваемые отчеты" (рисунок 159);

Импорт/Экспорт настраиваемых отчетов

в секции "Экспорт" выбрать один или несколько экспортируемых отчетов;

нажать кнопку Экспорт;

сохранить файл экспортируемого отчета стандартными средствами браузера.

Примечание – Операции экспорта и импорта отчетов могут выполняться между различными экземплярами РОСА Менеджер ресурсов одинаковой версии.

#### 9.3.9 Импорт отчета

Импорт отчета в РОСА Менеджер ресурсов осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Обзор → Отчеты";

развернуть аккордеон "Импорт/Экспорт" и выбрать пункт "Настраиваемые отчеты" (рисунок 19);

в секции "Импорт" нажать кнопку Выберите файл и выбрать файл импортируемого отчета;

при необходимости и наличии в Комплексе отчета с тем же наименованием установить флажок "Перезаписать существующие отчеты?";

при необходимости оставить файл за владельцем отчета установить флажок "Не изменять владельца?" ;

нажать кнопку Отправить.

#### 9.3.10 Управление структурой меню отчетов

Меню отчетов имеет следующую иерархическую структуру:

– аккордеоны;

– каталоги;

– отчеты.

Примечание – В контексте меню отчетов аккордеоны представляют собой тематические категории, по которым сгруппированы соответствующие каталоги с отчетами.

##### 9.3.10.1 Управление аккордеонами в меню отчетов

Управление аккордеонами (изменение порядка отображения категорий, добавление и удаление каталогов) в меню отчетов осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Обзор → Отчеты";

развернуть аккордеон "Редактировать меню отчетов";

выбрать пользовательскую роль, для которой осуществляется настройка структуры меню отчетов (рисунок 160);

Управление аккордеонами

нажать в секции "Отчеты" самый верхний уровень;

использовать следующие кнопки для изменения порядка отображения категорий, добавления и удаления каталогов в меню отчетов:

– для перемещения выбранного элемента в начало списка;

– для перемещения выбранного элемента на одну позицию вверх в списке;

– для перемещения выбранного элемента на одну позицию вниз в списке;

– для перемещения выбранного элемента в конец списка;

– для удаления выбранного каталога из меню отчетов;

– для добавления нового каталога, после чего ввести наименование каталога вместо значения "Новый каталог";

нажать кнопку Зафиксировать для применения сделанных изменений в меню отчетов или Отказаться – для отмены сделанных изменений

нажать кнопку Сохранить для сохранения текущей конфигурации меню отчетов и выхода из режима редактирования.

##### 9.3.10.2 Управление каталогами в аккордеоне

Управление каталогами (изменение порядка отображения и удаление каталогов из меню отчетов, добавление подкаталогов для хранения отчетов) в выбранном аккордеоне осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Обзор → Отчеты";

развернуть аккордеон "Редактировать меню отчетов";

выбрать пользовательскую роль, для которой осуществляется настройка структуры меню отчетов;

выбрать аккордеон, в котором будет осуществляться настройка каталогов;

использовать следующие кнопки для изменения порядка отображения и удаления каталогов, добавления подкаталогов в аккордеоне меню отчетов:

– для перемещения выбранного элемента в начало списка;

– для перемещения выбранного элемента на одну позицию вверх в списке;

– для перемещения выбранного элемента на одну позицию вниз в списке;

– для перемещения выбранного элемента в конец списка;

– для удаления выбранного каталога из меню отчетов;

– для добавления нового подкаталога в выбранный каталог, после чего ввести наименование подкаталога вместо значения "Новый каталог";

нажать кнопку Зафиксировать для применения сделанных изменений в меню отчетов или Отказаться – для отмены сделанных изменений;

нажать кнопку Сохранить для сохранения текущей конфигурации меню отчетов и выхода из режима редактирования.

##### 9.3.10.3 Управление отчетами в каталоге

Управление отчетами (изменение порядка отображения, добавление и удаление отчетов в меню) в выбранном каталоге осуществляется выполнением следующих действий;

в меню панели навигации выбрать пункт "Обзор → Отчеты";

развернуть аккордеон "Редактировать меню отчетов";

выбрать пользовательскую роль, для которой осуществляется настройка структуры меню отчетов;

развернуть аккордеон "Отчет";

выбрать каталог, в котором будет осуществляться настройка отчетов;

использовать следующие кнопки для изменения порядка отображения, добавления и удаления отчетов в каталоге меню отчетов:

– для перемещения выбранного элемента в начало списка;

– для перемещения выбранного элемента на одну позицию вверх в списке;

– для перемещения выбранного элемента на одну позицию вниз в списке;

– для перемещения выбранного элемента в конец списка;

– для добавления в каталог отчета, выбранного из списка "Доступные отчеты";

– для удаления из каталога отчета, выбранного в списке "Выбранные отчеты";

Примечание – Для добавления в каталог будут доступны только неразмещенные (находящиеся вне какого-либо каталога) отчеты.

нажать кнопку Зафиксировать для применения сделанных изменений в меню отчетов или Отказаться – для отмены сделанных изменений;

нажать кнопку Сохранить для сохранения текущей конфигурации меню отчетов и выхода из режима редактирования.

### 9.4 Загруженность

В РОСА Менеджер ресурсов для мониторинга текущей загруженности и отслеживания тенденций к изменениям нагрузки на ресурсы используется функционал просмотра загруженности, доступный в меню панели навигации "Обзор  Загруженность" (рисунок 161).

В левой панели рабочей области развернуто иерархическое меню компании, включающее регион, поставщиков ресурсов и хранилища. При выборе позиций меню в правой панели отображаются сводки и тенденции по загруженности мощностей (ЦП, память, место на дисках) по компании, региону, кластерам, хостам и хранилищам во вкладках:

"Сводные данные" – просмотр виджета "Процентная загруженность выбранного дня" и статистики максимальной и средней загруженности мощностей в зависимости от параметров:

"Прошлые тенденции" – период представления исторических данных;

"Классификация" – фильтр на основе тегов;

"Выбранный день" – день, от которого отчитывается период прошлых тенденций;

"Подробнее" – просмотр виджетов тенденций потребления мощностей в зависимости от параметров:

"Прошлые тенденции" – период представления исторических данных;

"Классификация" – фильтр на основе тегов;

"Отчет" – просмотр статистики загруженности мощностей виде отчетов в зависимости от параметров:

"Прошлые тенденции" – период представления исторических данных;

"Классификация" – фильтр на основе тегов;

"Выбранный день" – день, от которого отчитывается период прошлых тенденций;

Для работы с виджетами применяются пиктограммы, которые позволяют:

– просматривать данные в табличном виде в модальном окне; выгружать эти данные в формате .CSV нажатием кнопки Загрузить в CSV; закрыть модальное окно, нажав на пиктограмму в верхнем правом углу;

– разворачивать/сворачивать виджет на весь экран для удобного просмотра;

– экспортировать данные виджеты в форматы CSV, PNG и JPG.

Загруженность ресурсов

### 9.5 Оповещения

РОСА Менеджер ресурсов предоставляет пользователю интерфейс, предназначенный для отображения полученных оповещений (сообщений, предупреждений) о контролируемых событиях в Комплексе.

Количество сформированных и непрочитанных оповещений отображается в виде числового значения рядом с кнопкой Уведомления в правом верхнем углу экрана.

Для просмотра списка оповещений нужно нажать кнопку Уведомления, а для просмотра детальной информации о событии выбрать необходимое оповещение из общего списка.

Следует обратить внимание, что для поддержки оповещений серверу РОСА Менеджер ресурсов должна быть присвоена роль Notifier.

#### 9.5.1 Присвоение серверу РОСА Менеджер ресурсов роли Notifier

Присвоение серверу РОСА Менеджер ресурсов роли Notifier осуществляется выполнением следующих действий:

перейти на вкладку "Параметры  Параметры приложения" панели навигации;

развернуть аккордеон "Параметры" и выбрать сервер РОСА Менеджер ресурсов в разделе "Зоны", например "Сервер: EVM[1] (текущий)";

во вкладке "Сервер" в секции "Управление сервером" (рисунок 162) установить переключатель роли Notifier в положение "Вкл".

Роли сервера

нажать кнопку Сохранить.

#### 9.5.2 Создание оповещения

В общем случае создание нового оповещения осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Управление → Оповещения".

нажать кнопку Конфигурация и выбрать Добавить новое оповещение;

на экране появится интерфейс добавления в Комплекс нового оповещения, который содержит параметры оповещения, распределенные по секциям для последовательной настройки (рисунок 163);

Добавление нового оповещения

в секции "Сведения" выполнить следующие действия:

в поле "Описание" ввести наименование (краткое описание) оповещения;

установить флажок "Активно" для активации оповещения сразу после его создания;

выбрать одно из значений из раскрывающегося списка "Степень важности" оповещения: "Сведения", "Предупреждение" или "Ошибка";

из раскрывающегося списка "На основе" выбрать объект мониторинга:

ВМ и экземпляр;

Кластер;

Поставщик;

Проект контейнера;

Сервер;

Узел контейнера;

Физич. сервер;

Хост;

Хранилище данных;

из раскрывающегося списка "Что оценивать" выбрать контролируемое событие:

Ничего – без выбора события;

Аварийный сигнал VMware;

ВМ: значение изменено;

Нормальный рабочий диапазон;

Оборудование: конфигурация создана повторно;

Порог журналирования события;

Порог события;

Производительность в реальном времени;

Выражение (пользовательское);

из соответствующего раскрывающегося списка выбрать частоту получения оповещений, например "3 часа", при срабатывании триггера мониторинга, т.е. при достижении указанного условия или заданного порогового значения для выбранной метрики (полученных данных) мониторинга;

настроить параметры триггера мониторинга для выбранной метрики в появившейся секции "… Параметры"; доступные для настройки параметры триггера являются вариативными и зависят от ранее выбранных значений в списках "На основе" и "Что оценивать" (см. примеры в подразделе 9.5.3);

при необходимости отправки оповещений по Email и наличии подключения Комплекса к внешнему почтовому серверу выполнить следующую настройку в секции "Почта" рассылки информационных сообщений на электронную почту указанным пользователям в случае срабатывания триггера мониторинга:

установить флажок "Послать письмо";

в поле "От" указать адрес электронной почты отправителя или оставить это поле пустым для значения, настроенного по умолчанию;

в поле "Добавить пользователя" указать имя получателя (пользователя, существующего в Комплексе); для получения сообщений этот пользователь должен иметь зарегистрированный адрес электронной почты, указанный в его учетной записи;

опционально можно ввести адрес электронной почты любого пользователя вручную в поле "Добавить" и нажать ;

при необходимости отправки сообщений по протоколу SNMP выполнить следующую настройку применения в секции "Ловушка SNMP" на объекте мониторинга в случае срабатывания триггера мониторинга:

установить флажок "Послать SNMP-ловушку".

в поле "Хост" указать IP-адрес хоста, на который отправляются оповещения;

из соответствующего раскрывающегося списка выбрать используемую версию протокола SNMP: v1 или v2; при выборе версии v1 указать в соответствующем поле "Номер ловушки": 1 (информация), 2 (предупреждение) или 3 (ошибка); при выборе версии v2 указать в соответствующем поле "ID объекта ловушки": "информация", "предупреждение" или "ошибка";

в этой же секции можно указать несколько "ID объекта переменной" и определить их тип и значение в соответствующих полях;

Примечание – Номер (идентификатор) ловушки является добавочным суффиксом к базовому идентификатору объекта, например "1.3.6.1.4.1.33482".

при необходимости выполнить следующую настройку автоматического выполнения указанного действия в случае срабатывания триггера мониторинга:

установить флажок "Показать на временной шкале" в секции "Событие временной шкалы";

установить флажок "Послать событие управления" в секции "Событие управления";

нажать кнопку Добавить.

#### 9.5.3 Примеры создания оповещений

##### 9.5.3.1 Оповещение о перенастройке оборудования

Оповещение о перенастройке оборудования позволяет обнаружить изменения в конфигурации следующих аппаратных ресурсов ВМ:

количество ядер ЦП;

объем оперативной памяти.

Создание данного оповещения осуществляется в соответствии с п.9.5.2 при учете следующей специфики действий:

из раскрывающегося списка "На основе" выбрать "ВМ и экземпляр" в качестве объекта мониторинга;

из раскрывающегося списка "Что оценивать" выбрать "Оборудование: конфигурация изменена" в качестве контролируемого события;

из раскрывающихся списков в строке "Оборудование: атрибут" выбрать необходимую метрику (например, "Количество ядер ЦП") и триггер (например, "Уменьшено") (рисунок 164).

Контролируемый ресурс ВМ

##### 9.5.3.2 Оповещение об изменении нормального рабочего диапазона

Оповещение об изменении нормального рабочего диапазона позволяет отслеживать выход контролируемого параметра аппаратных ресурсов ВМ за границы нормального рабочего диапазона в течение периода времени от 1 минуты до 2 часов.

Примечание – Для расчета нормальных рабочих диапазонов должен быть включен контроль использования аппаратных ресурсов ВМ.

Создание данного оповещения осуществляется в соответствии с п.9.5.2 при учете следующей специфики действий:

из раскрывающегося списка "На основе" выбрать "ВМ и экземпляр" в качестве объекта мониторинга;

из раскрывающегося списка "Что оценивать" выбрать "Нормальный рабочий диапазон" в качестве контролируемого события;

из раскрывающихся списков в строке "Поле производительности" выбрать необходимую метрику и первое условия для триггера (например, "Увеличено");

из раскрывающегося списка "Поле отвечает критериям для" выбрать время (в качестве второго условия для триггера), в течение которого должно быть выполнено первое условия триггера для заданной метрики (рисунок 165).

Контролируемый параметр ВМ

##### 9.5.3.3 Использование аварийного оповещения VMware

РОСА Менеджер ресурсов предоставляет возможность использования аварийного оповещения VMware в качестве триггера для своего внутреннего оповещения.

Создание данного оповещения осуществляется в соответствии с п.9.5.2 при учете следующей специфики действий:

из раскрывающегося списка "На основе" выбрать "Кластер", "Хост" или "ВМ" в качестве объекта мониторинга;

из раскрывающегося списка "Что оценивать" выбрать "Аварийный сигнал VMware" в качестве контролируемого события;

из раскрывающихся списков секции "Аварийный сигнал VMware Параметры " выбрать экземпляр VMware и необходимый тип аварийного события VMware (рисунок 166).

Контролируемое оповещение VMware

##### 9.5.3.4 Создание оповещения на основе произвольных критериев

Создание оповещений на основе выражения с применением произвольных критериев, задаваемых пользователем, позволяет расширить существующий перечень базовых контролируемых событий для любого объекта мониторинга.

Создание данного оповещения осуществляется в соответствии с п.9.5.2 при учете следующей специфики действий:

из раскрывающегося списка "Что оценивать" выбрать "Выражение (пользовательское)";

для настройки метрики и триггера мониторинга использовать редактор выражений (рисунок 167).

Редактор выражений

#### 9.5.4 Редактирование параметров оповещения

Редактирование параметров оповещения осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Управление → Оповещения";

выбрать необходимое оповещение;

нажать кнопку Конфигурация и выбрать Редактировать это оповещение;

внести необходимые изменения в значения параметров оповещения;

нажать кнопку Сохранить.

#### 9.5.5 Копирование оповещения

Для создания нового оповещения на основе существующего нужно выполнить копирование базового оповещения и внести необходимые изменения в значения параметров скопированного оповещения.

Копирование оповещения осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Управление → Оповещения";

выбрать необходимое оповещение;

нажать кнопку Конфигурация и выбрать Скопировать это оповещение;

нажать кнопку Да в появившемся модальном окне для подтверждения операции копирования;

ввести уникальное описание и другие изменения в значения параметров скопированного оповещения;

нажать кнопку Добавить.

#### 9.5.6 Удаление оповещения

Удаление оповещения осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Управление → Оповещения";

выбрать необходимое оповещение;

нажать кнопку Конфигурация и выбрать удаления Удалить это оповещение;

нажать кнопку Да в появившемся модальном окне для подтверждения операции удаления.

#### 9.5.7 Выбор оповещения для оценки

Выбор оповещения для оценки осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Управление → Действия";

нажать кнопку Конфигурация и выбрать Добавить новое действие; на экране появится интерфейс добавления в Комплекс нового действия (рисунок 168);

Добавление нового действия

в поле "Описание" ввести наименование (краткое описание) действия;

из раскрывающегося списка "Тип действия" выбрать значение, например "Оценка оповещений";

в списке "Доступные оповещения" выбрать одно или несколько оповещений для оценки, после чего нажать кнопку Добавить для переноса необходимых оповещений в список "Выбранные оповещения"; можно также воспользоваться кнопками Добавить все, Удалить все, Удалить для переноса оповещений между списками;

Примечание – Для выбора нескольких оповещений из списка можно дополнительно использовать клавишу Ctrl.

нажать кнопку Добавить.

#### 9.5.8 Экспорт оповещения

Экспорт оповещения из Комплекса осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Управление → Импорт/Экспорт";

в секции "Экспорт" из раскрывающегося списка "Экспорт" выбрать значение "Оповещения";

в списке "Доступные оповещения" выбрать одно или несколько оповещений для экспорта (рисунок 169);

Импорт/экспорт оповещений

Примечание – Можно использовать клавишу Ctrl для выбора нескольких оповещений из списка.

нажать кнопку Экспорт;

сохранить файл экспортируемого оповещения стандартными средствами браузера.

Примечание – Операции экспорта и импорта оповещений могут выполняться между различными экземплярами РОСА Менеджер ресурсов одинаковой версии.

#### 9.5.9 Импорт оповещения

Импорт оповещения в РОСА Менеджер ресурсов осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Управление → Импорт/Экспорт";

в секции "Импорт" нажать кнопку Выберите файл, после чего выбрать файл импортируемого оповещения;

нажать кнопку Отправить.

#### 9.5.10 Профили оповещений

Профиль оповещений представляет собой сформированный набор (группу) стандартных оповещений, который может быть единовременно применен к любому объекту мониторинга в РОСА Менеджер ресурсов.

##### 9.5.10.1 Создание профиля оповещений

Создание профиля оповещений осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Управление → Профили оповещений";

нажать кнопку Конфигурация и выбрать  Добавить новый профиль оповещений; на экране появится интерфейс добавления в Комплекс нового профиля оповещений (рисунок 170);

Добавление нового профиля оповещения

в поле "Описание" ввести наименование (краткое описание) профиля оповещений;

в раскрывающемся списке "Режим" выбрать объект, для которого создается профиль оповещения;

в списке "Доступные оповещения" выбрать необходимые оповещения для формирования профиля, после чего нажатием кнопок Добавить, Добавить все, Удалить все, Удалить перенести эти оповещения в список "Выбранные оповещения" или обратно;

Примечание – Использовать клавишу Ctrl для выбора необходимых оповещений из списка.

нажать кнопку Добавить.

##### 9.5.10.2 Применение профиля оповещений к объекту мониторинга

Применение профиля оповещений к объекту мониторинга осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Управление → Профили оповещений";

выбрать необходимый профиль оповещений;

нажать кнопку Конфигурация и выбрать Редактировать назначения этого профиля оповещений;

выбрать необходимый объект мониторинга, к которому будет применен профиль оповещений (рисунок 171);

Назначение профиля оповещений

нажать кнопку Сохранить.

##### 9.5.10.3 Редактирование профиля оповещений

Редактирование профиля оповещений осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Управление → Профили оповещений";

выбрать необходимый профиль оповещений;

нажать кнопку Конфигурация и выбрать Редактировать этот профиль оповещений;

внести необходимые изменения в значения параметров профиля оповещений;

нажать кнопку Сохранить.

##### 9.5.10.4 Удаление профиля оповещений

Удаление профиля оповещений осуществляется выполнением следующих действий:

в меню панели навигации выбрать пункт "Управление → Профили оповещений";

выбрать необходимый профиль оповещений;

нажать кнопку Конфигурация и выбрать Удалить этот профиль оповещений;

нажать кнопку Да в модальном окне для подтверждения удаления профиля.

Примечание – Оповещения, входящие в состав профиля, не удаляются из Комплекса при удалении профиля.