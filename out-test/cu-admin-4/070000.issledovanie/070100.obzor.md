# Обзор

Чтобы получить доступ к "Explore (Исследование)" нужно выполнить следующие действия:

1. нажать на "Explore (Исследование)" в меню слева;

Чтобы начать с существующего запроса на панели мониторинга, выбрать "Explore (Исследование)" в меню панели в правом верхнем углу. Откроется страница "Explore (Исследование)" с запросом панели, что позволит изменить или дополнить запрос за пределами панели мониторинга (рисунок 59).

::sign-image
---
src: /image103.png
sign: Меню панели с опцией "Explore (Исследование)"
---
::

1. выбрать источник данных из раскрывающегося списка в левом верхнем углу;
2. с помощью редактора запросов, доступного для конкретного источника данных, начать писать запрос.

В некоторых редакторах запросов есть опция "Kick start your query (Начать запрос)", которая предоставляет список базовых готовых запросов.

В зависимости от конкретного источника данных некоторые редакторы запросов позволяют выбрать метку или метки для добавления в запрос. Метки – это поля, состоящие из пар "ключ-значение", представляющих информацию в данных. Некоторые источники данных позволяют выбирать поля.

1. нажать Run query (Выполнить запрос) в правом верхнем углу, чтобы выполнить запрос.

## Элементы интерфейса

Контур содержимого – это боковая панель навигации, которая отслеживает запросы и визуализации, созданные в разделе "Explore (Исследование)". Она позволяет быстро переключаться между ними.

Контур содержимого работает в режиме разделения экрана, при этом для каждой панели создается отдельная структура.

Чтобы открыть контур содержимого, нужно нажать кнопку Outline (Контур) в левом верхнем углу экрана "Explore (Исследование)".

Затем можно нажать на значок любой панели в оглавлении, чтобы перейти к этой панели.

## Интерфейс

Разделенное представление позволяет легко сравнивать визуализации или одновременно просматривать связанные данные на одной странице.

Чтобы открыть разделенный вид нужно выполнить следующие действия:

1. нажать кнопку Split (Разделить), чтобы продублировать текущий запрос и разделить страницу на два запроса, расположенных рядом;
2. запускать и перезапускать запросы так часто, как это необходимо.

Возможно выбрать другой источник данных или другие метрики и фильтры меток для нового запроса, что позволит сравнить один и тот же запрос на двух разных серверах или сравнить промежуточную среду с рабочей средой (рисунок 60).

::sign-image
---
src: /image104.png
sign: Экран разделения
---
::

Также можно связать переключатели времени на обеих панелях, нажав на одну из кнопок синхронизации времени, прикрепленных к переключателям. При наличии связи изменение времени на одной панели автоматически обновляет другую, сохраняя синхронизацию времени начала и окончания. Это гарантирует, что на обеих панелях будут отображаться данные за один и тот же временной интервал.

Для выхода из режима разделения следует нажать кнопку Close (Закрыть).

## Контур содержимого

С помощью поля выбора времени можно задать диапазон времени для запроса. По умолчанию используется "Last 6 hours (Последние 6 часов)". Возможно выбрать другой вариант в раскрывающемся списке или использовать абсолютный диапазон времени. Также можно изменить часовой пояс, связанный с запросом, или использовать финансовый год.

Чтобы изменить часовой пояс или применить финансовый год нужно нажать кнопку Change time settings (Изменить настройки времени).

## Разделение и сравнение

Чтобы выполнять запросы к нескольким источникам данных на одной панели выбирают "Mixed" в раскрывающемся списке источников данных. При этом выборе можно выбрать другой источник данных для каждого добавляемого запроса.

## Выбор времени

При использовании функции "Explore (Исследование)" URL-адрес в адресной строке браузера обновляется по мере внесения изменений в запросы. Возможно поделиться этим URL-адресом или добавить его в закладки.

> Примечание – Функция "Explore (Исследование)" может генерировать длинные URL-адреса, которые некоторые инструменты, например приложения для обмена сообщениями или видеоконференций, могут сокращать из-за фиксированной длины сообщений. В таких случаях функция "Explore (Исследование)" выводит предупреждение и загружает состояние по умолчанию. Если возникают проблемы при публикации ссылок "Explore" в этих приложениях, можно создавать сокращенные ссылки.

Поскольку URL-адреса "Explore (Исследование)" имеют определенную структуру, можно создать URL-адрес с помощью внешних инструментов и открыть его в Подсистеме. Структура URL-адреса:

```yaml
http://<devlan_url>/explore?panes=<panes>&schemaVersion=<schema_version>&orgId=<org_id>
где:
```

- org_id – идентификатор организации;
- schema_version – версия схемы (должна быть установлена последняя версия, т.е. 1);
- panes – закодированный в URL-адресе объект JSON с панелями, где каждый ключ – это идентификатор панели, а каждое значение – это объект, соответствующий следующей схеме:

```bash Terminal
{
datasource: string; // the pane's root datasource UID, or `-- Mixed --` for mixed datasources
queries: {
refId: string; // an alphanumeric identifier for this query, must be unique within the pane, i.e. "A", "B", "C", etc.
datasource: {
uid: string; // the query's datasource UID ie: "AD7864H6422"
type: string; // the query's datasource type-id, i.e: "loki"
}
// ... any other datasource-specific query parameters
}[]; // array of queries for this pane
range: {
from: string; // the start time, in milliseconds since epoch
to: string; // the end time, in milliseconds since epoch
}
}
```

> Примечание – from и to также поддерживают относительные диапазоны, заданные в единицах измерения времени и относительных диапазонах.

## Источник данных Mixed

Функция обмена краткой ссылкой позволяет создавать более короткие и простые URL-адреса в формате /goto/:uid вместо длинных URL-адресов с параметрами запроса. Чтобы создать краткую ссылку на выполненный запрос, нужно нажать "Share (Поделиться)" на панели инструментов "Explore (Исследование)".

Краткая ссылка, к которой не обращались автоматически, удаляется через настраиваемый период, по умолчанию составляющий семь дней. Однако если к ссылке обращались хотя бы один раз, она не будет удалена.

У кратких ссылок есть два варианта: относительное время (например, с двух часов назад до настоящего момента) или абсолютное время (например, с 8 утра до 10 утра). По умолчанию при публикации краткой ссылки копируется выбранный диапазон времени, независимо от того, относительный он или абсолютный.

Для создания короткой ссылки с указанием абсолютного времени нужно:

1. нажать кнопку выпадающего списка рядом с кнопкой обмена краткой ссылкой;
2. выбрать один из вариантов в секции "Time-Sync URL Links (URL-ссылки для синхронизации по времени)".

Это гарантирует, что любой, кто получит ссылку, увидит те же данные, что и пользователь, независимо от того, когда он ее откроет. Выбранный диапазон времени останется неизменным.

## Обмен URL-адресами

Раздел "Explore (Исследование)" предоставляет множество инструментов, помогающих управлять запросами.

## Обмен краткой ссылкой

История запросов содержит список запросов, которые создали в разделе "Explore (Исследование)". Эта история хранится в базе данных Подсистемы и не предоставляется другим пользователям. Срок хранения истории запросов составляет две недели. Запросы, которым больше двух недель, автоматически удаляются.

> Примечание – Запросы, отмеченные , не подпадают под двухнедельный период хранения и не удаляются.

::sign-image
---
src: /image17.png
sign: Рисунок 486
---
::

Чтобы просмотреть историю запросов требуется:

1. перейти на страницу "Explore (Исследование)";
2. нажать на "Query history (Истории запросов)".

Панель "История запросов" открывается в нижней части страницы и содержит следующие вкладки:

- Query history (История запросов) – содержит историю всех запросов с возможностью поиска и управления ими;
- Starred (Избранное) – cодержит все выделенные запросы;
- Setting (Настройки) – предоставляет настраиваемые параметры для истории запросов.

Во вкладке "Query history (История запросов)" отображается история запросов за последние две недели, если только запрос не помечен , что означает, что он не удаляется. Для каждого отдельного запроса можно:

::sign-image
---
src: /image17.png
sign: Рисунок 487
---
::

- запустить и перезапустить выполнение запроса;
- создать и/или отредактировать комментарий;
- скопировать запрос в буфер обмена;
- скопировать краткую ссылку с запросом в буфер обмена;
- удалить запрос;
- создать запрос.

По умолчанию в истории запросов сначала отображаются самые новые запросы. Можно нажать на поле сортировки в правом верхнем углу, чтобы изменить порядок на "Oldest first (Сначала старые)". Возможно искать запросы по ключевым словам.