# Настройка ссылок на данные

Переменные в ссылках на данные позволяют отправлять пользователей на подробную панель мониторинга с сохраненными фильтрами данных. Например, можно использовать переменные для указания метки, диапазона времени, серии или выбора переменной.

Чтобы просмотреть список доступных переменных, нужно ввести "$" в поле "URL" ссылки на данные.

Переменные панели временного диапазона позволяют включить текущий диапазон времени в URL-адрес ссылки на данные (таблица 52).

1. Переменные временного диапазона

| **Переменная** | **Описание** |
| --- | --- |
| __url_time_range | Временной диапазон текущей панели мониторинга (например, ?from=now-6h&to=now) |
| __from | Для получения дополнительной информации см. п.5.7.4 |
| __to | Для получения дополнительной информации см. п.5.7.4 |

При создании ссылок на данные с использованием переменных временного диапазона, таких как __url_time_range в URL-адресе, нужно самостоятельно сформировать синтаксис параметров запроса, то есть отформатировать URL-адрес, добавив параметры запроса с помощью вопросительного знака "?" и амперсанда "&". Эти символы не генерируются автоматически.

Переменные, зависящие от серии, доступны в пространстве имен __series (таблица 53).

1. Переменные серии

| **Переменная** | **Описание** |
| --- | --- |
| __series.name | Название серии по URL-адресу |

Переменные, зависящие от поля, доступны в пространстве имен __field (таблица 54).

1. Переменные поля

| **Переменная** | **Описание** |
| --- | --- |
| __field.name | Название поля |
| __field.labels.<LABEL> | Значение метки для URL. Если метка содержит точки, использовать синтаксис __field.labels["<LABEL>"] |

Переменные, зависящие от значения, доступны в пространстве имен __value (таблица 55).

1. Переменные значения

| **Переменная** | **Описание** |
| --- | --- |
| __value.time | Временная метка значения (в миллисекундах эпохи Unix) для URL (например, ?time=1560268814105) |
| __value.raw | Необработанное значение |
| __value.numeric | Числовое представление значения |
| __value.text | Текстовое представление значения |
| __value.calc | Имя вычисления, если значение является результатом вычисления |

Использование переменных, зависящих от значений, в ссылках на данные может приводить к разным результатам в зависимости от выбранного режима всплывающей подсказки.

При создании ссылок на данные с использованием переменных временного диапазона, таких как __value.time в URL-адресе, нужно самостоятельно сформировать синтаксис параметра запроса, то есть добавить вопросительный знак (?) и амперсанд (&). Эти символы не генерируются автоматически.

Чтобы получить доступ к значениям и меткам из других полей, используются переменные данных (таблица 56).

1. Переменные данных

| **Переменная** | **Описание** |
| --- | --- |
| __data.fields[i] | Значение поля "i" (в той же строке) |
| __data.fields["NameOfField"] | Значение поля с использованием имени вместо индекса |
| __data.fields[1].labels.cluster | Доступ к меткам другого поля |

При переходе по ссылке на другую панель мониторинга, использующую переменные шаблона, можно выбрать значения переменных для того, кто переходит по ссылке (таблица 57).

${var-myvar:queryparam} – где var-myvar – это имя переменной шаблона, которая соответствует переменной в текущей панели мониторинга, которую требуется использовать.

1. Переменные шаблона

| **Переменные состояния** | **Результат в созданном URL** |
| --- | --- |
| Выбрано одно значение | var-myvar=value1 |
| Выбраны несколько значений | var-myvar=value1&var-myvar=value2 |
| Выбраны все значения | var-myvar=All |

Если требуется добавить в URL все переменные текущей панели мониторинга, использовать ${__all_variables}.

## Поддерживаемые визуализации

Для добавления ссылки на данные нужно выполнить следующие действия:

1. перейти к панели, на которую требуется добавить ссылку на данные;
2. нажать  в правом верхнем углу панели;
  [Рисунок 563](/image64.png)
3. выбрать Edit (Редактировать), чтобы открыть редактор панели;
4. на панели редактирования прокрутить вниз до раздела "Data Links (Ссылки на данные)" и развернуть его;
5. нажать +Add link (Добавить ссылку);
6. в открывшемся диалоговом окне ввести "Title (Название)" – это удобочитаемая метка ссылки, которая будет отображаться в пользовательском интерфейсе;
7. ввести "URL" или переменную, на которую требуется создать ссылку;
8. чтобы добавить переменную для ссылки на данные, нажать в поле "URL" и ввести "$" или нажать Ctrl+Пробел/Cmd+Пробел, чтобы увидеть список доступных переменных;
9. если требуется, чтобы ссылка открывалась в новой вкладке, переключить "Open in a new tab (Открыть в новой вкладке)";
10. нажать Save (Сохранить), чтобы сохранить изменения.

Если добавляется несколько ссылок на данные, можно управлять порядком их отображения в визуализации. Для этого следует нажать и переместить ссылку на данные в нужное место.

## Переменные ссылок на данные

Помимо переопределения полей, можно использовать сопоставление значений, чтобы изменить способ отображения данных в визуализации.

Например, отображение, примененное на рисунке 51, приводит к отображению текста Cold, Good и Hot в синем, зеленом и красном цветах для диапазонов температур, а не для фактических значений температуры. Использование сопоставлений значений таким образом может ускорить и упростить понимание и интерпретацию данных.

::sign-image
---
src: /image90.png
sign: Сопоставление значений
---
::

Сопоставления значений обходят форматирование единиц измерения, заданное в разделе "Standart options (Стандартные параметры)" редактора панели, например цвет или количество отображаемых десятичных знаков. Если в панели есть сопоставления значений, Подсистема отображает их сводную информацию в секции "Value mapping (Сопоставления значений)" редактора панели.

## Добавление ссылки на данные

В Подсистеме можно настроить сопоставления значений для следующих визуализаций:

- Столбчатая диаграмма;
- Бар-индикатор;
- Свечной график;
- Canvas;
- Индикатор;
- Геокарта;
- Гистограмма;
- Круговая диаграмма;
- Статистика;
- Временная шкала состояния;
- История состояния;
- Таблица;
- Временные ряды;
- Тенденция.