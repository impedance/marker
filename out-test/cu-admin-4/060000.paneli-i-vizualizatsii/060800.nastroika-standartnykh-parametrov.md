# Настройка стандартных параметров

В этом разделе описываются все доступные стандартные опции. Чтобы задать эти параметры, нужно развернуть секцию "Standard options (Стандартные параметры)" на панели редактора панели. Большинство параметров полей не будут влиять на визуализацию, пока не будет выхода за пределы поля, параметры которого редактируются, или не будет нажата клавиша Enter.

> Примечание – Не все перечисленные параметры применимы ко всем визуализациям со стандартными параметрами.

Unit (Единица измерения)

Эта опция позволяет выбрать единицу измерения для поля, для этого нужно нажать в поле "Unit (Единица измерения)", затем прокручивать вниз, пока не найдется нужную единицу измерения. Выбранная единица измерения применяется ко всем полям, кроме времени.

Пользовательские единицы измерения

Также можно использовать раскрывающийся список "Unit (Единица измерения)" для указания пользовательских единиц измерения, пользовательских префиксов или суффиксов, а также форматов даты и времени.

Чтобы установить пользовательскую единицу измерения, нужно ввести единицу измерения, которую требуется использовать, а затем выбрать ее в раскрывающемся списке. Она будет указана последней в списке. Например, если ввести единицу измерения "Hearts", в раскрывающемся списке появится опция "Custom unit: Hearts".

Также можно определить пользовательскую единицу измерения с помощью специального синтаксиса. Например, чтобы установить пользовательскую единицу измерения валюты под названием "Gems", необходимо нужно ввести currency:Gems в поле. В раскрывающемся списке появится опция "Custom unit: currency:Gems".

В таблице 49 перечислены специальные параметры синтаксиса для пользовательских единиц измерения.

1. Параметры синтаксиса

| **Пользовательская единица измерения** | **Описание** |
| --- | --- |
| suffix:<suffix> | Пользовательская единица измерения, которая должна идти после значения |
| prefix:<prefix> | Пользовательская единица измерения, которая должна предшествовать значению |
| time:<format> | Пользовательские форматы даты и времени, например time:YYYY-MM-DD |
| si:<base scale><unit characters> | Пользовательские единицы измерения СИ, например "si: mF". Возможно указать как единицу измерения, так и масштаб исходных данных |
| count:<unit> | Пользовательская единица измерения количества |
| currency:<unit> | Пользовательская денежная единица |

Также можно вставить собственный эмодзи в раскрывающийся список "Unit (Единица измерения)" и выбрать его в качестве пользовательской единицы измерения (рисунок 45).

::sign-image
---
src: /image83.png
sign: Использование эмодзи
---
::

::sign-image
---
src: /image84.png
sign: Использование эмодзи
---
::

Масштабирование единицы измерения

По умолчанию Подсистема автоматически масштабирует единицу измерения в зависимости от величины значения. Например, если есть значения 0,14 кВт и 3000 кВт, Подсистема отобразит их как 140 Вт и 3 МВт соответственно. Возможно использовать пользовательские единицы измерения, чтобы управлять этим поведением, задав префикс, суффикс или пользовательскую единицу измерения СИ.

Строковые единицы измерения

Иногда Подсистема слишком агрессивно интерпретирует строки и отображает их в виде чисел. Чтобы настроить отображение исходного строкового значения, выбрать "Misc (Разное)  String (Строка)" в раскрывающемся списке "Unit (Единица)".

Min

Опция задает минимальное значение, используемое при расчете процентного порога. Можно оставить это поле пустым, чтобы минимальное значение рассчитывалось автоматически.

Max

Опция задает максимальное значение, используемое при расчете процентного порога. Можно оставить это поле пустым, чтобы автоматически рассчитать максимальное значение.

Field (поля) min/max

По умолчанию вычисляемые Min- и Max-значения основаны на минимальном и максимальном значениях всех серий и полей. Если включить Min/Max-значения поля, Подсистема вычислит минимальное или максимальное значение каждого поля отдельно на основе минимального или максимального значения поля.

Decimals (Десятичные знаки)

Указывает количество десятичных знаков, которые Подсистема будет отображать в значении. Если оставить это поле пустым, Подсистема автоматически сократит количество десятичных знаков в зависимости от значения. Например, 1,1234 отобразится как 1,12, а 100,456 – как 100.

Чтобы отобразить все десятичные дроби, следует установить единицу измерения в "String".

Display name (Отображаемое имя)

Задать заголовок для всех полей. В заголовке поля можно использовать переменные.

При отображении нескольких метрик, полей или серий это поле управляет заголовком для каждого метрики. Возможно использовать выражения, например ${__field.name}, чтобы использовать в заголовке только название серии или поля.

В таблице 50 приведены примеры различных имен полей, созданных с помощью различных выражений. В этом примере есть поле с именем "Temp" и метками {"Loc"="PBI", "Sensor"="3"}:

1. Примеры имен полей

| **Синтаксис выражения** | **Пример** | **Рендерит для** | **Объяснение** |
| --- | --- | --- | --- |
| ${__field.displayName} | Тот же синтаксис | Temp {Loc="PBI", Sensor="3"} | Отображает имя поля и метки в {} в случае их наличия. Если в ответе есть только один ключ метки, то для части метки Подсистема отображает значение метки без фигурных скобок |
| ${__field.name} | Тот же синтаксис | Temp | Отображает название поля (без меток) |
| ${__field.labels} | Тот же синтаксис | Loc="PBI", Sensor="3" | Отображает метки без названия |
| ${__field.labels.X} | ${__field.labels.Loc} | PBI | Отображает значение указанного ключа метки. |
| ${__field.labels.__values} | Тот же синтаксис | PBI, 3 | Отображает значения меток, разделенных запятой (без ключей меток). |

Если после отображения выражения для конкретного поля значение представляет собой пустую строку, применяется метод отображения по умолчанию.

Color scheme (Цветовая схема)

Параметры "Color scheme (Цветовая схема)" позволяют задать один или несколько цветов для всей визуализации.

Варианты цветов и их влияние на визуализацию зависят от того, с какой визуализацией проводится работа. В некоторых визуализациях используются разные варианты цветов.

Можно выбрать одну из схем, приведенных в таблице 51.

1. Цветовые схемы

| **Цветовая схема** | **Описание** |
| --- | --- |
| Одиночный цвет | Задает один цвет |
| Оттенки цвета | Выбирает оттенки одного цвета |
| Из пороговых значений (по значению) | Цвет берется из соответствующего порога. Для некоторых визуализаций также нужно выбрать, будет ли цвет определяться Last, Min или Max-значением поля или ряда |
| Классическая палитра | Автоматически назначается цвет для каждого поля или ряда в зависимости от их порядка. Если порядок поля в запросе меняется, меняется и цвет. Полезно для графиков, круговых диаграмм и других визуализаций категориальных данных |
| Классическая палитра (по названию серии) | Автоматически назначаются цвета в зависимости от названия серии. Это полезно, когда названия визуализируемых серий могут меняться в зависимости от доступных данных |
| Несколько непрерывных цветов (по значению) | Автоматически назначаются цвета в зависимости от процентного соотношения значения к минимальному и максимальному значениям поля или ряда. Для некоторых визуализаций также нужно выбрать, будет ли цвет определяться Last, Min или Max- значением поля или ряда. Можно выбрать один из вариантов: Green-Yellow-Red, Red-Yellow-Green, Blue-Yellow-Red, Yellow-Red, Blue-Purple и Yellow-Blue |
| Единый непрерывный цвет (по значению) | Автоматически присваиваются оттенки одного цвета в зависимости от процентного соотношения значения к минимальному и максимальному значениям поля или ряда. Для некоторых визуализаций также нужно выбрать, будет ли цвет определяться Last, Min или Max-значением поля или ряда. выбрать из: Blues, Reds, Greens и Purples |

Также можно использовать легенду, чтобы открыть палитру цветов, нажав на значок цвета серии в легенде. При таком способе установки цвета автоматически создается правило переопределения, которое устанавливает конкретный цвет для определенной серии.

No value (Без значения)

В этом случае вводят значение, которое Подсистема должна отображать, если значение поля пустое или равно нулю. Значение по умолчанию – дефис "-".

## Поддерживаемые визуализации

Панель редактирования содержит легенду, которую можно использовать для идентификации и интерпретации данных, отображаемых в визуализации. Каждый вариант легенды добавляет контекст и ясность данным, представленным в визуализации.

## Стандартные опции

Легенды поддерживаются для следующих визуализаций:

- Столбчатая диаграмма;
- Свечной график;
- Гистограмма;
- Круговая диаграмма;
- Временная шкала состояния;
- История состояния;
- Временные ряды;
- Тенденция;
- Диаграмма XY.

На геокартах и тепловых картах также есть легенды, но они позволяют только выбирать отображать или не отображать легенду, и не поддерживают другие варианты легенд.