# Обзор

В Подсистеме доступно несколько сочетаний клавиш. Можно нажать ? на клавиатуре, чтобы отобразить все сочетания клавиш, доступные в версии Подсистемы.

- Ctrl+S – сохранить текущую панель мониторинга;
- f – открыть панель поиска "finder"/"search";
- d+k – переключить режим киоска (скрывает меню);
- d+e – развернуть все строки;
- d+s – настроить панель мониторинга;
- Ctrl+K – открыть палитру команд;
- Esc – закрыть панель при просмотре в полноэкранном режиме или в режиме редактирования или вернуться на панель мониторинга из настроек панели мониторинга.

Наведя курсор "мыши" на панель, можно использовать сочетания клавиш, которые будут работать с этой панелью.

- e – переключить вид редактирования панели;
- v – переключить панель на полноэкранный режим;
- pu – открыть конфигурацию ссылки на панель общего доступа;
- pe – открыть конфигурацию встраивания панели общего доступа;
- ps – открыть конфигурацию снимка панели общего доступа;
- pd – дублировать панель;
- pr – удалить панель.

## Сочетания клавиш

Подсистема предоставляет несколько способов управления временными диапазонами визуализируемых данных для панелей мониторинга, а также для оповещений.

В этом разделе описаны поддерживаемые единицы измерения времени и относительные диапазоны, общие элементы управления временем, настройки времени для всей панели и настройки времени для отдельных панелей.

Подсистема поддерживает следующие единицы измерения времени: s (seconds), m (minutes), h (hours), d (days), w (weeks), M (months), Q (quarters) и y (years).

Оператор "минус" позволяет вернуться в прошлое по отношению к текущей дате и времени или now. Если требуется отобразить полный период (день, неделю, месяц и т. д.), следует добавить "/<time unit>" в конец. Для просмотра финансовых периодов используют единицы измерения времени "fQ (fiscal quarter)" и "fy (fiscal year)".

Оператор "плюс" позволяет переместиться во времени вперед по отношению к текущему моменту. Например, можно использовать эту функцию, чтобы просмотреть прогнозируемые данные в будущем.

В таблице 37 приведены примеры относительных диапазонов:

1. Относительные диапазоны

| **Пример относительного диапазона** | **От:** | **До:** |
| --- | --- | --- |
| Последние 5 минут | now-5m | now |
| День до сих пор | now/d | now |
| На этой неделе | now/w | now/w |
| В течение этой неделе | now/w | now |
| В этом месяце | now/M | now/M |
| В течение этого месяце | now/M | now |
| Предыдущий месяц | now-1M/M | now-1M/M |
| В течение этого года | now/Y | now |
| В этом году | now/Y | now/Y |
| Предыдущий финансовый год | now-1y/fy | now-1y/fy |

> Примечание – Оповещение Подсистемы в настоящее время не поддерживает следующие синтаксисы:

- now+n для будущих временных меток.
- now-1n/n означает "с начала n до конца n", потому что это абсолютная временная метка.

## Установка временного диапазона панели мониторинга

Панель мониторинга и элементы управления временем на панели имеют общий пользовательский интерфейс (рисунок 17).

::sign-image
---
src: /image37.png
sign: Элементы управления временем
---
::

Текущий диапазон времени, также называемый выбором времени, показывает диапазон времени, который в данный момент отображается на панели мониторинга или панели, которую просматривают.

Чтобы увидеть точные временные метки в диапазоне и их источник (например, локальный браузер) нужно навести курсор на поле (рисунок 18).

::sign-image
---
src: /image38.png
sign: Элементы управления временем
---
::

1. Текущий диапазон времени

Для изменения текущего диапазона времени следует нажать на него. Можно изменить текущее время, используя относительный диапазон времени, например последние 15 минут, или абсолютный диапазон времени, например "2020-05-14 00:00:00 to 2020-05-15 23:59:59" (рисунок 19).

::sign-image
---
src: /image39.png
sign: Текущий диапазон времени
---
::

1. Изменение текущего диапазона

Относительный временной диапазон можно выбрать из списка "Relative time ranges (Относительные временные диапазоны)", а отфильтровать список – с помощью поля ввода в верхней части страницы.

Абсолютный временной диапазон можно установить следующими способами:

- ввести значения в поля "From (От)" и "To (До)" – точные или относительные, например now-24h, а затем нажать Apply time range (Применить диапазон времени);
- нажать в поле "From (От)" или "To (До)"; Подсистема отобразит календарь; затем нажать день или дни, которые требуется использовать в качестве текущего диапазона времени, а затем нажать Apply time range (Применить диапазон времени).

Также можно использовать настройки абсолютного диапазона времени, чтобы задать полуотносительный диапазон времени. Панели мониторинга с полуотносительным диапазоном времени полезны, если нужно отслеживать прогресс чего-либо с течением времени, но при этом требуется видеть всю историю с начальной точки.

Например, можно задать полуотносительный диапазон времени, указав для начала абсолютную метку времени, а для конца – "сейчас", то есть относительно текущего времени:

```bash Terminal
Время начала: 2023-05-01 00:00:00
Время окончания: now
```

Если требуется отслеживать ход выполнения чего-либо в рабочее время, можно установить временной диапазон, охватывающий текущий день, но начиная с 8 утра, например:

```bash Terminal
Время начала: now/d+8h
Время окончания: now
```

Это эквивалентно предустановленному временному диапазону "Today so far (В течение сегодняшнего дня)", но начинается в 8:00 утра, а не в 12:00, за счет добавления 8 часов к периодическому времени начала.

При использовании полуотносительного временного диапазона по мере течения времени панель мониторинга будет автоматически и постепенно уменьшать масштаб, чтобы показывать больше истории и меньше деталей. В то же время по мере уменьшения разрешения данных исторические тенденции за весь период времени будут становиться более очевидными.

Можно скопировать и вставить диапазон времени с панели мониторинга в "Explore (Исследование)" и наоборот, или с одной панели мониторинга на другую, для чего нажать значок "Copy time range to clipboard (Копировать диапазон времени в буфер обмена)", чтобы скопировать текущий диапазон времени в буфер обмена. Затем нужно вставить диапазон времени в "Explore (Исследование)" или на другую панель мониторинга.

Также можно скопировать и вставить диапазон времени, используя сочетания клавиш t+c и t+v соответственно.

Чтобы просмотреть более широкий временной диапазон на панели мониторинга или визуализации можно использовать значок "Zoom out (Уменьшение масштаба)" (Cmd+Z или Ctrl+Z).

Для увеличения масштаба (применимо только к графическим визуализациям) нужно нажать и переместить, чтобы выбрать диапазон времени для визуализации, которую требуется просмотреть.

Для обновления панели мониторинга нужно нажать на значок "Refresh dashboard (Обновить панель мониторинга)", чтобы немедленно выполнить все запросы на панели мониторинга и обновить визуализации. При обновлении Подсистема отменяет все ожидающие выполнения запросы.

По умолчанию Подсистема не обновляет панель мониторинга автоматически. Запросы выполняются по расписанию в соответствии с настройками панели. Однако, если требуется регулярно обновлять панель мониторинга, требуется нажать стрелку вниз рядом со значком "Refresh dashboard (Обновить панель мониторинга)", а затем выбрать интервал обновления.

При выборе интервала "Auto (Авто)" обновление происходит в зависимости от диапазона времени запроса и ширины окна браузера. Короткие диапазоны времени обновляются часто, а длинные – редко. Нет необходимости обновлять чаще, чем позволяют пиксели для отображения любых обновлений.

После изменения панели мониторинга, чтобы не выходить из режима редактирования при сохранении, можно воспользоваться кнопкой Apply (Применить).

## Общие элементы управления временным диапазоном

Можно управлять диапазоном времени на панели мониторинга, указав следующие параметры запроса в URL-адресе панели мониторинга:

- from – определяет нижний предел диапазона времени, указанный в миллисекундах, эпохах или относительном времени;
- to – определяет верхний предел диапазона времени, указанный в миллисекундах, эпохах или относительном времени;
- time и time.window – определяет диапазон времени от time-time.window/2 до time+time.window/2. Оба параметра должны быть указаны в ms. Например, ?time=1500000000000&time.window=10000 соответствует 10-секундному диапазону времени от 1499999995000 до 1500000005000;
- timezone – определяет часовой пояс, например timezone=Europe/Madrid.

Поскольку это не переменные, для них не требуется префикс "var-".

## Управление временным диапазоном с помощью URL-адреса

После добавления специального фильтра в настройках панели мониторинга можно создавать пары "метка/значение" для фильтров на панели мониторинга. Эти фильтры применяются ко всем запросам метрик, использующим указанный источник данных, и ко всем панелям на панели мониторинга.

Чтобы отфильтровать данные панели мониторинга, необходимо выполнить следующие действия (рисунок 20):

1. на панели мониторинга нажать на поле фильтра;
2. выбрать метку, оператор и значение;
3. чтобы добавить несколько значений для одной метки, выбрать один из операторов множественного выбора: "One of (Один из) (=|)" или "Not one of (Ни один из) (!=|)". Эти операторы отображаются только в том случае, если их поддерживает источник данных фильтра;
4. повторять этот процесс по мере необходимости, пока не будут созданы все необходимые фильтры.

::sign-image
---
src: /image40.png
sign: Фильтрация данных
---
::

Чтобы отредактировать или удалить фильтры, следует выполнить следующие действия:

1. на панели мониторинга нажать в любом месте фильтра, который требуется изменить;
2. выполнить одно из следующих действий:
  1. чтобы изменить оператор или значение фильтра, нажать в любом месте фильтра и обновить его (рисунок 21);

::sign-image
---
src: /image41.png
sign: Изменение фильтра
---
::

1. чтобы изменить метку фильтра, необходимо удалить фильтр и создать новый;
2. чтобы удалить фильтр, нажать на  рядом с ним.
  [Изменение фильтра](/image22.png)

## Фильтрация данных панели мониторинга

Для поиска по всей Подсистеме используется командная панель и запуск основных действий с любой страницы приложения.

Командная панель (рисунок 22) позволяет осуществлять:

- поиск и открытие панелей мониторинга и папок;
- создание панелей мониторинга и правил оповещения;
- поиск страниц в Подсистеме;
- изменять тему на темную или светлую;
- проводить исследования Sift.

::sign-image
---
src: /image42.png
sign: Командная панель
---
::

```bash Terminal
Чтобы открыть командную панель, нужно нажать Cmd+K в macOS или Ctrl+K в Linux/Windows. Также можно нажать на поле ввода, расположенное на панели навигации.
```

> Примечание – Чтобы вернуться к предыдущему шагу, следует нажать Backspace в пустой командной строке.

## Поиск

Панели мониторинга и панели позволяют отображать данные в наглядном виде. Для отображения визуализации на каждой панели должен быть хотя бы один запрос.

Предварительно необходимо:

- убедиться, что есть необходимые разрешения;
- определить панель мониторинга, к которой требуется добавить панель;
- понимать язык запросов целевого источника данных;
- убедиться, что источник данных, для которого пишется запрос, добавлен.

Для создания панели мониторинга нужно выполнить следующие действия:

1. выбрать "Dashboards (Панели мониторинга)" в главном меню;
2. нажать "New (Создать)" и выбрать "New Dashboard (Новая панель мониторинга)".
3. на пустой панели мониторинга нажать +Add visualization (Добавить визуализацию) (рисунок 23);

::sign-image
---
src: /image5.png
sign: Создание панели мониторинга
---
::

1. в открывшемся диалоговом окне выполнить одно из следующих действий:
  - выбрать один из существующих источников данных;
  - выбрать один из встроенных в Подсистему специальных источников данных;
  - нажать Configure a new data source (Настроить новый источник данных), чтобы создать новый (только для администраторов) (рисунок 24);

::sign-image
---
src: /image6.png
sign: Выбор источника данных
---
::

После этого откроется представление "Edit panel (Редактирование панели)" с выбранным источником данных. При необходимости можно изменить источник данных панели позже с помощью выпадающего списка на вкладке "Query (Запрос)" в редакторе панели.

1. написать или сконструировать запрос на языке запросов текущего источника данных;
2. нажать значок , чтобы запросить источник данных;
  [Выбор источника данных](/image43.png)
3. в списке визуализация выбрать тип визуализации (рисунок 25);

::sign-image
---
src: /image44.png
sign: Выбор типа визуализации
---
::

Подсистема отображает предварительный просмотр результатов запроса с примененной визуализацией.

1. в секции "Panel options (Параметры панели)" ввести название и описание для панели;
2. обратиться к более подробной информации, чтобы узнать, как можно настроить параметры панели:
  - настройка сопоставлений значений;
  - параметры, специфичные для визуализации;
  - переопределение значений полей;
  - настройка пороговых значений;
  - настройка стандартных параметров;
3. после окончания редактирования нажать Save dashboard (Сохранить панель мониторинга); в качестве альтернативы нажать Apply (Применить), если требуется сначала увидеть, как изменения повлияют на панель мониторинга, затем нажать Save dashboard (Сохранить панель мониторинга) при готовности;
4. ввести название и описание для панели мониторинга;
5. выбрать папку, если это применимо;
6. нажать Save (Сохранить);
7. чтобы добавить на панель мониторинга дополнительные панели, нажать Add (Добавить) в заголовке панели мониторинга и выбрать "Visualization (Визуализация)" в раскрывающемся списке (рисунок 26);

::sign-image
---
src: /image45.png
sign: Выбор визуализации
---
::

При добавлении дополнительных панелей на панель мониторинга сразу осуществляется переход в раздел "Edit panel (Редактирование панели)".