# Приложение В. Типы процессов

Пассивная проверка – это простой запрос данных. Сервер или Прокси запрашивает какие-либо данные (например, загрузку CPU), и Агент отправляет результат обратно Серверу.

За определением длины заголовка и данных следует обратиться к подробностям протокола (см. п.Б.1).

- Запрос Сервера:

```bash Terminal
<ключ элемента данных>
```

Ответ Агента:

```bash Terminal
<ДАННЫЕ>[\0<ОШИБКА>]
```

где часть в квадратных скобках опциональна и отправляется только по неподдерживаемым элементам данных.

Например, для поддерживаемых элементов данных:

1. сервер открывает TCP-соединение;
2. сервер отправляет <ЗАГОЛОВОК><ДЛИНАДАННЫХ>agent.ping;
3. Агент читает запрос и отвечает <ЗАГОЛОВОК><ДЛИНАДАННЫХ>1;
4. сервер обрабатывает данные, чтобы извлечь значение "1";
5. TCP-соединение закрывается.

Для неподдерживаемых элементов данных:

1. сервер открывает TCP-соединение;
2. сервер отправляет <ЗАГОЛОВОК><ДЛИНАДАННЫХ>vfs.fs.size[/nono];
3. Агент читает запрос и отвечает <ЗАГОЛОВОК><ДЛИНАДАННЫХ>ZBX_NOTSUPPORTED\0Cannot obtain filesystem information: [2] No such file or directory;
4. сервер обрабатывает данные, меняет состояние элемента данных на неподдерживаемое с приведенным сообщением об ошибке;
5. TCP-соединение закрывается.